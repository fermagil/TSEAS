<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Plato Interactivo con Nutrición Avanzada</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General styles */
        body {
            font-family: 'Inter', sans-serif; /* Use Inter font */
            background-color: #f7fafc; /* gray-100 background */
        }
        /* Plate container styling */
        .plate-container {
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid #a0aec0; /* gray-500 border */
            margin: 2rem auto;
            background-color: #edf2f7; /* gray-200 background */
        }
        /* Individual plate sections */
        .plate-section {
            position: absolute;
            width: 50%;
            height: 50%;
            padding: 15px;
            overflow: hidden;
            box-sizing: border-box;
            border: 1px solid #e2e8f0; /* gray-300 border */
        }
        /* Titles within plate sections */
        .plate-section h3 {
            position: absolute;
            font-weight: bold;
            font-size: 1.1rem;
            text-align: center;
            z-index: 2;
            background-color: transparent;
            transform: translate(-50%, -50%);
            width: 80%;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        /* Specific title positions and colors */
        #vegetables-section h3 { top: 35%; left: 60%; color: #276749; } /* Dark Green */
        #fruits-section h3 { top: 15%; left: 60%; color: #9b2c2c; }   /* Dark Red */
        #grains-section h3 { top: 35%; left: 40%; color: #b7791f; }     /* Dark Yellow/Brown */
        #protein-section h3 { top: 15%; left: 40%; color: #c05621; }    /* Dark Orange */

        /* Lists within plate sections */
        .plate-section ul {
            position: absolute;
            list-style: none;
            padding: 0;
            margin: 0;
            width: auto;
            max-width: 85%;
            max-height: calc(100% - 40px);
            overflow-y: auto;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            color: #2d3748; /* gray-800 text color */
            text-align: left;
            scrollbar-width: thin;
            scrollbar-color: #a0aec0 #e2e8f0;
            &::-webkit-scrollbar { width: 8px; }
            &::-webkit-scrollbar-track { background: #e2e8f0; border-radius: 4px; }
            &::-webkit-scrollbar-thumb { background-color: #a0aec0; border-radius: 4px; border: 2px solid #e2e8f0; }
        }
         /* Specific list positions */
        #vegetables-list { top: 50%; left: 45%; }
        #fruits-list     { top: 35%; left: 45%; }
        #grains-list     { top: 50%; left: 10%; }
        #protein-list    { top: 35%; left: 10%; }


        /* Individual list items in the plate */
         .plate-section ul li {
            margin-bottom: 5px;
            word-break: break-word;
            line-height: 1.4;
            display: flex;
            align-items: center;
            padding: 2px 0;
            position: relative;
         }
         /* Remove button styling in the plate */
         .plate-section ul li button {
             padding: 0 5px;
             line-height: 1;
             margin-left: 4px;
             flex-shrink: 0;
             border: none;
             background: none;
             cursor: pointer;
             font-weight: bold;
             font-size: 1.1rem;
             color: #e53e3e; /* red-600 color */
             transition: color 0.2s;
             text-shadow: 1px 1px 1px rgba(255,255,255,0.5);
         }
          .plate-section ul li button:hover { color: #c53030; } /* red-700 color on hover */
         /* Text span within list items */
         .plate-section ul li span { text-align: left; }

        /* Background colors for plate sections */
        #vegetables-section { top: 0; left: 0; background-color: #c6f6d5; border-radius: 100% 0 0 0; } /* green-200 */
        #fruits-section { bottom: 0; left: 0; background-color: #fed7d7; border-radius: 0 0 0 100%; } /* red-200 */
        #grains-section { top: 0; right: 0; background-color: #fefcbf; border-radius: 0 100% 0 0; } /* yellow-200 */
        #protein-section { bottom: 0; right: 0; background-color: #fbd38d; border-radius: 0 0 100% 0; } /* orange-300 */

        /* Side sections (Oils and Drinks) styling */
        .side-section {
            text-align: center;
            margin-top: 1rem;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            background-color: #ffffff;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
        }
        .side-section h3 {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #4a5568;
            margin-top: 0.5rem;
        }
        .side-section ul {
            list-style: none;
            padding: 0;
            margin: 0 auto;
            font-size: 0.9rem;
            max-width: 95%;
            flex-grow: 1;
            overflow-y: auto;
            width: 100%;
        }
        .side-section ul li {
            margin-bottom: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 2px 5px;
            word-break: break-word;
        }
        .side-section ul li button {
             padding: 0 5px;
             line-height: 1;
             margin-left: 4px;
             flex-shrink: 0;
             border: none;
             background: none;
             cursor: pointer;
             font-weight: bold;
             font-size: 1rem;
             color: #e53e3e; /* red-600 */
             transition: color 0.2s;
        }
        .side-section ul li button:hover { color: #c53030; } /* red-700 */
        .side-section ul li span { text-align: center; }

        /* Notification styling */
        #notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #48bb78; /* green-500 */
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: opacity 0.5s ease-in-out;
            opacity: 0;
        }
        #notification.show { display: block; opacity: 1; }
        #notification.error { background-color: #f56565; } /* red-500 */

        /* Styles for limited/avoid items */
        .limited-item { font-style: italic; color: #718096; } /* gray-600 */
        .avoid-item { font-style: italic; color: #c53030; font-weight: bold;} /* red-700 */

        /* General button enhancements */
         button { transition: all 0.2s ease-in-out; }
         button:hover:not(.plate-section ul li button):not(.side-section ul li button) {
             transform: translateY(-1px);
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
         }
         button:active:not(.plate-section ul li button):not(.side-section ul li button) {
              transform: translateY(0);
              box-shadow: none;
         }

        /* Analysis Results Styling */
        #analysis-results {
            margin-top: 1rem;
            padding: 1rem;
            border: 1px solid #e2e8f0; /* border-gray-300 */
            border-radius: 0.375rem;
            background-color: #ffffff; /* White background for the main container */
            width: 100%;
        }
        #analysis-results h3 { /* Main title */
            font-size: 1.25rem; /* text-xl */
            font-weight: 700; /* font-bold */
            margin-bottom: 1rem;
            color: #374151; /* gray-800 */
            text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #d1d5db; /* gray-300 */
        }
         #analysis-results h4 { /* Section titles */
            font-size: 1rem; /* text-base */
            font-weight: 600; /* font-semibold */
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: #4a5568; /* gray-700 */
        }
        #analysis-results p, #analysis-results ul {
            font-size: 0.875rem; /* text-sm */
            color: #4a5568; /* gray-700 */
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }
         #analysis-results strong {
             color: #2d3748; /* gray-800 */
             font-weight: 600;
         }
         #analysis-results ul {
            list-style: none; /* Remove default bullets for suggestions/tips */
            padding-left: 0; /* Remove padding */
         }
         #analysis-results ul li::before { /* Add custom bullet */
            content: "•";
            color: #a0aec0; /* gray-500 */
            display: inline-block;
            width: 1em;
            margin-left: -1em; /* Adjust spacing */
         }
         #analysis-results .disclaimer {
             font-size: 0.75rem; /* text-xs */
             font-style: italic;
             color: #718096; /* gray-600 */
             margin-top: 1.5rem; /* Increased margin */
             text-align: center;
         }
         /* Specific section styling */
         .detailed-analysis-section { margin-bottom: 1rem; }
         .nutrition-summary-section { margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px dashed #d1d5db; }
         .suggestions-section {
             background-color: #fefcbf; /* yellow-100 */
             border: 1px solid #fde047; /* yellow-300 */
             border-radius: 0.375rem; /* rounded-md */
             padding: 0.75rem; /* p-3 */
             margin-bottom: 1rem;
         }
         .suggestions-section h4 { color: #ca8a04; } /* yellow-600 */
         .suggestions-section ul li::before { content: "▲"; color: #ca8a04; } /* yellow-600 triangle */

         .positives-section {
             background-color: #dcfce7; /* green-100 */
             border: 1px solid #86efac; /* green-300 */
             border-radius: 0.375rem; /* rounded-md */
             padding: 0.75rem; /* p-3 */
             margin-bottom: 1rem;
         }
         .positives-section h4 { color: #16a34a; } /* green-600 */
         .positives-section ul li::before { content: "✓"; color: #16a34a; } /* green-600 check */


         /* Responsive adjustments */
         @media (max-width: 1024px) {
             .main-grid { grid-template-columns: 1fr; }
             .order-1 { order: 1; }
             .order-2 { order: 2; }
         }
         @media (max-width: 600px) {
            .plate-section h3 { font-size: 0.9rem; }
            .plate-section ul { font-size: 0.8rem; }
            .plate-section ul li button { font-size: 1rem; }
            .side-section ul { font-size: 0.8rem; }
            .side-section ul li button { font-size: 0.9rem; }
            .add-button { padding-left: 0.75rem; padding-right: 0.75rem; }
            #analysis-results h3 { font-size: 1.1rem; }
            #analysis-results h4 { font-size: 0.9rem; }
            #analysis-results p, #analysis-results ul { font-size: 0.8rem; }
            .side-section-container { grid-template-columns: 1fr; }
         }

    </style>
</head>
<body class="p-4 md:p-8">
    <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-700 mb-6">Mi Plato Interactivo</h1>

    <div class="container mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8 main-grid">

        <div class="lg:col-span-1 bg-white p-4 md:p-6 rounded-lg shadow-md order-2 lg:order-1">
            <h2 class="text-xl font-semibold mb-4 text-gray-600">1. Selecciona Alimentos</h2>
            <div class="mb-4">
                <label for="vegetables-select" class="block text-sm font-medium text-gray-700 mb-1">Vegetales (Máx: 5):</label>
                <select id="vegetables-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">-- Elige un vegetal --</option>
                </select>
                <button onclick="addFood('vegetables')" class="add-button mt-2 w-full text-sm bg-green-500 hover:bg-green-600 text-white py-1 px-3 rounded shadow">Añadir Vegetal</button>
            </div>
            <div class="mb-4">
                <label for="fruits-select" class="block text-sm font-medium text-gray-700 mb-1">Frutas (Máx: 3):</label>
                <select id="fruits-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">-- Elige una fruta --</option>
                </select>
                <button onclick="addFood('fruits')" class="add-button mt-2 w-full text-sm bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded shadow">Añadir Fruta</button>
            </div>
            <div class="mb-4">
                <label for="grains-select" class="block text-sm font-medium text-gray-700 mb-1">Granos Integrales (Máx: 3):</label>
                <select id="grains-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">-- Elige un grano --</option>
                </select>
                <button onclick="addFood('grains')" class="add-button mt-2 w-full text-sm bg-yellow-500 hover:bg-yellow-600 text-white py-1 px-3 rounded shadow">Añadir Grano</button>
            </div>
            <div class="mb-4">
                <label for="protein-select" class="block text-sm font-medium text-gray-700 mb-1">Proteína Saludable (Máx: 3):</label>
                <select id="protein-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">-- Elige una proteína --</option>
                </select>
                <button onclick="addFood('protein')" class="add-button mt-2 w-full text-sm bg-orange-500 hover:bg-orange-600 text-white py-1 px-3 rounded shadow">Añadir Proteína</button>
            </div>
            <div class="mb-4">
                <label for="oils-select" class="block text-sm font-medium text-gray-700 mb-1">Aceites Saludables:</label>
                <select id="oils-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">-- Elige un aceite --</option>
                </select>
                <button onclick="addFood('oils')" class="add-button mt-2 w-full text-sm bg-teal-500 hover:bg-teal-600 text-white py-1 px-3 rounded shadow">Añadir Aceite</button>
            </div>
            <div class="mb-4">
                <label for="drinks-select" class="block text-sm font-medium text-gray-700 mb-1">Bebidas:</label>
                <select id="drinks-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">-- Elige una bebida --</option>
                </select>
                <button onclick="addFood('drinks')" class="add-button mt-2 w-full text-sm bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded shadow">Añadir Bebida</button>
            </div>

            <h2 class="text-xl font-semibold mt-6 mb-4 text-gray-600">2. Define tu Contexto</h2>
             <div class="mb-4">
                <label for="objective-select" class="block text-sm font-medium text-gray-700 mb-1">Tu Objetivo:</label>
                <select id="objective-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="maintain">Mantener peso</option>
                    <option value="lose">Perder peso</option>
                    <option value="gain">Ganar masa muscular</option>
                </select>
            </div>
             <div class="mb-4">
                <label for="activity-level-select" class="block text-sm font-medium text-gray-700 mb-1">Tu Nivel de Actividad Física:</label>
                <select id="activity-level-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="sedentary">Sedentaria</option>
                    <option value="light">Leve</option>
                    <option value="moderate">Moderada</option>
                    <option value="intense">Intensa</option>
                </select>
            </div>
            <div class="mb-4">
                <label for="daily-calories-input" class="block text-sm font-medium text-gray-700 mb-1">Ingesta Diaria de Calorías (kcal):</label>
                <input type="number" id="daily-calories-input" value="2000" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="Ej: 2000">
            </div>

            <button id="analyze-button" class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded shadow-lg">
                3. Analizar Plato y Ver Recomendaciones
            </button>

             <div class="mt-6 pt-4 border-t border-gray-200">
                 <h2 class="text-xl font-semibold mb-4 text-gray-600">Acciones</h2>
                 <div class="grid grid-cols-2 gap-3">
                     <button id="save-button" class="bg-blue-500 hover:bg-blue-600 text-white text-sm py-2 px-3 rounded shadow">Guardar Plato</button>
                     <button id="load-button" class="bg-gray-500 hover:bg-gray-600 text-white text-sm py-2 px-3 rounded shadow">Cargar Plato</button>
                     <button id="print-button" class="bg-green-500 hover:bg-green-600 text-white text-sm py-2 px-3 rounded shadow">Imprimir/PDF</button>
                     <button id="clear-button" class="bg-red-500 hover:bg-red-600 text-white text-sm py-2 px-3 rounded shadow">Limpiar Plato</button>
                 </div>
             </div>
        </div>

        <div class="lg:col-span-2 flex flex-col items-center order-1 lg:order-2">
            <div id="plate" class="plate-container w-full max-w-xl aspect-square">
                <div id="vegetables-section" class="plate-section">
                    <h3>Vegetales</h3>
                    <ul id="vegetables-list"></ul>
                </div>
                <div id="fruits-section" class="plate-section">
                    <h3>Frutas</h3>
                    <ul id="fruits-list"></ul>
                </div>
                <div id="grains-section" class="plate-section">
                    <h3>Granos Integrales</h3>
                    <ul id="grains-list"></ul>
                </div>
                <div id="protein-section" class="plate-section">
                    <h3>Proteína Saludable</h3>
                    <ul id="protein-list"></ul>
                </div>
            </div>

             <div class="w-full max-w-xl mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4 side-section-container">
                <div id="oils-section" class="side-section bg-teal-100 border-teal-300">
                    <h3 class="text-teal-800">Aceites Saludables</h3>
                    <ul id="oils-list"></ul>
                </div>
                <div id="drinks-section" class="side-section bg-blue-100 border-blue-300">
                    <h3 class="text-blue-800">Bebidas</h3>
                    <ul id="drinks-list"></ul>
                </div>
            </div>

            <div id="analysis-results" class="w-full max-w-xl mt-4 bg-white p-4 md:p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-bold mb-4 text-gray-700 text-center">Análisis del Plato</h3>
                <p class="text-gray-500 italic text-center">Selecciona alimentos, define tu contexto y haz clic en "Analizar Plato" para ver los resultados.</p>
            </div>
        </div>

    </div>

    <div id="notification"></div>

    <script>
        // --- DATA per 100gr---
        const foodData = {
  vegetables: {
    'Acelga': {
      kcal: 20, protein: 1.8, fat: 0.2, carbs: 2.1, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina A', amount: 611, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 30, unit: 'mg' },
        // (ejemplo adicional: Vitamina K: 830 µg)
      ],
      minerals: [
        { name: 'Calcio', amount: 51, unit: 'mg' },
        { name: 'Hierro', amount: 1.8, unit: 'mg' }
      ]
    },
    'Achicoria': {
      kcal: 17, protein: 1, fat: 0.3, carbs: 3.4, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina A', amount: 300, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 10, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Hierro', amount: 1.0, unit: 'mg' }
      ]
    },
    'Ajo': {
      kcal: 149, protein: 6.4, fat: 0.5, carbs: 33, fiber: 2.1,
      vitamins: [
        { name: 'Vitamina C', amount: 31, unit: 'mg' },
        { name: 'Vitamina B6', amount: 1.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 181, unit: 'mg' },
        { name: 'Hierro', amount: 1.7, unit: 'mg' }
      ]
    },
    'Alcaparras': {
      kcal: 23, protein: 2.4, fat: 0.9, carbs: 4, fiber: 2.9,
      vitamins: [
        { name: 'Vitamina K', amount: 23, unit: 'µg' },
        { name: 'Vitamina C', amount: 7, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 190, unit: 'mg' },
        { name: 'Hierro', amount: 2.3, unit: 'mg' }
      ]
    },
    'Alfalfa (brotes)': {
      kcal: 23, protein: 4, fat: 0.7, carbs: 1.9, fiber: 1.9,
      vitamins: [
        { name: 'Vitamina K', amount: 30, unit: 'µg' },
        { name: 'Vitamina C', amount: 8, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 32, unit: 'mg' },
        { name: 'Hierro', amount: 1.6, unit: 'mg' }
      ]
    },
    'Algas (genérico)': {
      kcal: 45, protein: 1.7, fat: 0.5, carbs: 9, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina A', amount: 100, unit: 'µg' },
        { name: 'Vitamina C', amount: 3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 150, unit: 'mg' },
        { name: 'Hierro', amount: 2, unit: 'mg' }
      ]
    },
    'Apio': {
      kcal: 16, protein: 0.7, fat: 0.2, carbs: 3, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina C', amount: 3, unit: 'mg' },
        { name: 'Vitamina K', amount: 29, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Potasio', amount: 260, unit: 'mg' }
      ]
    },
    'Apionabo': {
      kcal: 42, protein: 1.5, fat: 0.3, carbs: 9, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 10, unit: 'mg' },
        { name: 'Vitamina K', amount: 20, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 50, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Alcachofas': {
      kcal: 47, protein: 3.3, fat: 0.2, carbs: 10.5, fiber: 5.4,
      vitamins: [
        { name: 'Vitamina C', amount: 11, unit: 'mg' },
        { name: 'Vitamina K', amount: 14, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 44, unit: 'mg' },
        { name: 'Hierro', amount: 1.3, unit: 'mg' }
      ]
    },
    'Arvejas (Guisantes)': {
      kcal: 81, protein: 5.4, fat: 0.4, carbs: 14, fiber: 5.5,
      vitamins: [
        { name: 'Vitamina C', amount: 40, unit: 'mg' },
        { name: 'Vitamina K', amount: 24, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 25, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Bambú (brotes)': {
      kcal: 27, protein: 2.6, fat: 0.3, carbs: 5.2, fiber: 2.2,
      vitamins: [
        { name: 'Vitamina A', amount: 120, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 12, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Batata (Boniato)': {
      kcal: 86, protein: 1.6, fat: 0.1, carbs: 20, fiber: 3,
      vitamins: [
        { name: 'Vitamina A', amount: 709, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 20, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 38, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Berenjena': {
      kcal: 25, protein: 1, fat: 0.2, carbs: 6, fiber: 3,
      vitamins: [
        { name: 'Vitamina C', amount: 2.2, unit: 'mg' },
        { name: 'Vitamina K', amount: 3.5, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 9, unit: 'mg' },
        { name: 'Hierro', amount: 0.2, unit: 'mg' }
      ]
    },
    'Berro': {
      kcal: 11, protein: 2.3, fat: 0.1, carbs: 1.3, fiber: 0.5,
      vitamins: [
        { name: 'Vitamina A', amount: 463, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 43, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 120, unit: 'mg' },
        { name: 'Hierro', amount: 1.3, unit: 'mg' }
      ]
    },
    'Borraja': {
      kcal: 20, protein: 1.5, fat: 0.2, carbs: 3, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 25, unit: 'mg' },
        { name: 'Vitamina A', amount: 150, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 55, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Brócoli': {
      kcal: 34, protein: 2.8, fat: 0.4, carbs: 7, fiber: 2.6,
      vitamins: [
        { name: 'Vitamina C', amount: 89, unit: 'mg' },
        { name: 'Vitamina K', amount: 101, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 47, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Calabacín': {
      kcal: 17, protein: 1.2, fat: 0.3, carbs: 3.1, fiber: 1,
      vitamins: [
        { name: 'Vitamina C', amount: 17, unit: 'mg' },
        { name: 'Vitamina A', amount: 100, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Calabaza': {
      kcal: 26, protein: 1, fat: 0.1, carbs: 6.5, fiber: 0.5,
      vitamins: [
        { name: 'Vitamina A', amount: 426, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 9, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 37, unit: 'mg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Canónigos': {
      kcal: 25, protein: 2.5, fat: 0.2, carbs: 3.5, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina A', amount: 400, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 18, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 37, unit: 'mg' },
        { name: 'Hierro', amount: 1.1, unit: 'mg' }
      ]
    },
    'Cardo': {
      kcal: 17, protein: 1.2, fat: 0.2, carbs: 3.5, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina C', amount: 6, unit: 'mg' },
        { name: 'Vitamina K', amount: 25, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 39, unit: 'mg' },
        { name: 'Hierro', amount: 1.0, unit: 'mg' }
      ]
    },
    'Cardo mariano': {
      kcal: 25, protein: 1, fat: 0.2, carbs: 4, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 5, unit: 'mg' },
        { name: 'Vitamina K', amount: 20, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 35, unit: 'mg' },
        { name: 'Hierro', amount: 0.9, unit: 'mg' }
      ]
    },
    'Cebolla': {
      kcal: 40, protein: 1.1, fat: 0.1, carbs: 9, fiber: 1.7,
      vitamins: [
        { name: 'Vitamina C', amount: 7, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.12, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 23, unit: 'mg' },
        { name: 'Hierro', amount: 0.2, unit: 'mg' }
      ]
    },
    'Champiñones': {
      kcal: 22, protein: 3.1, fat: 0.3, carbs: 3.3, fiber: 1,
      vitamins: [
        { name: 'Vitamina D', amount: 0.2, unit: 'µg' },
        { name: 'Vitamina B2', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 3, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Champiñones silvestres': {
      kcal: 22, protein: 3, fat: 0.3, carbs: 3, fiber: 1,
      vitamins: [
        { name: 'Vitamina D', amount: 0.2, unit: 'µg' },
        { name: 'Vitamina B2', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 3, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Chirivía': {
      kcal: 75, protein: 1.2, fat: 0.3, carbs: 18, fiber: 4.9,
      vitamins: [
        { name: 'Vitamina C', amount: 9, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.16, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 30, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Colinabo': {
      kcal: 27, protein: 1.7, fat: 0.1, carbs: 6, fiber: 3.6,
      vitamins: [
        { name: 'Vitamina C', amount: 45, unit: 'mg' },
        { name: 'Vitamina K', amount: 40, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 58, unit: 'mg' },
        { name: 'Hierro', amount: 0.9, unit: 'mg' }
      ]
    },
    'Col china': {
      kcal: 12, protein: 1.2, fat: 0.2, carbs: 2.2, fiber: 1,
      vitamins: [
        { name: 'Vitamina C', amount: 18, unit: 'mg' },
        { name: 'Vitamina A', amount: 60, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 30, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Coles (Repollo)': {
      kcal: 25, protein: 1.3, fat: 0.1, carbs: 5.8, fiber: 2.5,
      vitamins: [
        { name: 'Vitamina C', amount: 36, unit: 'mg' },
        { name: 'Vitamina K', amount: 76, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Coles de bruselas': {
      kcal: 43, protein: 3.4, fat: 0.3, carbs: 8, fiber: 3.8,
      vitamins: [
        { name: 'Vitamina C', amount: 85, unit: 'mg' },
        { name: 'Vitamina K', amount: 177, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 42, unit: 'mg' },
        { name: 'Hierro', amount: 1.4, unit: 'mg' }
      ]
    },
    'Coliflor': {
      kcal: 25, protein: 1.9, fat: 0.3, carbs: 5, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 46, unit: 'mg' },
        { name: 'Vitamina K', amount: 15, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 22, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Cúrcuma (polvo)': {
      kcal: 354, protein: 7.8, fat: 9.9, carbs: 64, fiber: 21.1,
      vitamins: [
        { name: 'Vitamina C', amount: 0, unit: 'mg' },
        { name: 'Vitamina E', amount: 1.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 168, unit: 'mg' },
        { name: 'Hierro', amount: 55, unit: 'mg' }
      ]
    },
    'Diente de león': {
      kcal: 45, protein: 2.7, fat: 0.2, carbs: 7.5, fiber: 3,
      vitamins: [
        { name: 'Vitamina A', amount: 420, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 35, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 187, unit: 'mg' },
        { name: 'Hierro', amount: 3, unit: 'mg' }
      ]
    },
    'Endivia': {
      kcal: 17, protein: 1.2, fat: 0.2, carbs: 3.4, fiber: 3.1,
      vitamins: [
        { name: 'Vitamina C', amount: 8, unit: 'mg' },
        { name: 'Vitamina K', amount: 170, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 19, unit: 'mg' },
        { name: 'Hierro', amount: 1, unit: 'mg' }
      ]
    },
    'Eneldo': {
      kcal: 43, protein: 3.5, fat: 1.1, carbs: 7, fiber: 2.1,
      vitamins: [
        { name: 'Vitamina C', amount: 26, unit: 'mg' },
        { name: 'Vitamina A', amount: 200, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 99, unit: 'mg' },
        { name: 'Hierro', amount: 3.5, unit: 'mg' }
      ]
    },
    'Escarola': {
      kcal: 17, protein: 1.2, fat: 0.3, carbs: 3.4, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina A', amount: 280, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 8, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 52, unit: 'mg' },
        { name: 'Hierro', amount: 1.2, unit: 'mg' }
      ]
    },
    'Espárragos': {
      kcal: 20, protein: 2.2, fat: 0.2, carbs: 3.9, fiber: 2.1,
      vitamins: [
        { name: 'Vitamina A', amount: 38, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 24, unit: 'mg' },
        { name: 'Hierro', amount: 2.1, unit: 'mg' }
      ]
    },
    'Espinaca': {
      kcal: 23, protein: 2.9, fat: 0.4, carbs: 3.6, fiber: 2.2,
      vitamins: [
        { name: 'Vitamina A', amount: 469, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 28, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 99, unit: 'mg' },
        { name: 'Hierro', amount: 2.7, unit: 'mg' }
      ]
    },
    'Galanga': {
      kcal: 80, protein: 1.9, fat: 0.5, carbs: 17, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 20, unit: 'mg' },
        { name: 'Vitamina A', amount: 150, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.6, unit: 'mg' }
      ]
    },
    'Grelos': {
      kcal: 28, protein: 2.5, fat: 0.3, carbs: null, fiber: 2.2,
      vitamins: [
        { name: 'Vitamina C', amount: 42, unit: 'mg' },
        { name: 'Vitamina K', amount: 200, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 80, unit: 'mg' },
        { name: 'Hierro', amount: 1, unit: 'mg' }
      ]
    },
    'Habas (cocidas)': {
      kcal: 110, protein: 7.6, fat: 0.7, carbs: 19, fiber: 5.4,
      vitamins: [
        { name: 'Vitamina C', amount: 6, unit: 'mg' },
        { name: 'Vitamina B9', amount: 148, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 60, unit: 'mg' },
        { name: 'Hierro', amount: 2.5, unit: 'mg' }
      ]
    },
    'Hinojo': {
      kcal: 31, protein: 1.2, fat: 0.2, carbs: 7, fiber: 3.1,
      vitamins: [
        { name: 'Vitamina C', amount: 12, unit: 'mg' },
        { name: 'Vitamina A', amount: 25, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 49, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Hisopo': {
      kcal: 101, protein: 3.5, fat: 0.6, carbs: 10, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 15, unit: 'mg' },
        { name: 'Vitamina A', amount: 30, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Hojas de mostaza': {
      kcal: 27, protein: 2, fat: 0.3, carbs: 3.5, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina A', amount: 1450, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 70, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 119, unit: 'mg' },
        { name: 'Hierro', amount: 1.2, unit: 'mg' }
      ]
    },
    'Hongos (Setas)': {
      kcal: 22, protein: 3.1, fat: 0.3, carbs: 3.3, fiber: 1,
      vitamins: [
        { name: 'Vitamina D', amount: 0.2, unit: 'µg' },
        { name: 'Vitamina B2', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 3, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Jengibre': {
      kcal: 80, protein: 1.8, fat: 0.8, carbs: 17.8, fiber: 2,
      vitamins: [
        { name: 'Vitamina B6', amount: 0.16, unit: 'mg' },
        { name: 'Vitamina C', amount: 5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.6, unit: 'mg' }
      ]
    },
    'Jícama': {
      kcal: 38, protein: 0.7, fat: 0.1, carbs: 8.8, fiber: 4.9,
      vitamins: [
        { name: 'Vitamina C', amount: 20, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 33, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Judías verdes': {
      kcal: 31, protein: 1.8, fat: 0.1, carbs: 7, fiber: 3.4,
      vitamins: [
        { name: 'Vitamina C', amount: 12, unit: 'mg' },
        { name: 'Vitamina A', amount: 35, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 37, unit: 'mg' },
        { name: 'Hierro', amount: 1, unit: 'mg' }
      ]
    },
    'Lechuga (genérica)': {
      kcal: 15, protein: 1.4, fat: 0.2, carbs: 2.9, fiber: 1.3,
      vitamins: [
        { name: 'Vitamina A', amount: 740, unit: 'IU' },
        { name: 'Vitamina K', amount: 62, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 6, unit: 'mg' },
        { name: 'Hierro', amount: 0.9, unit: 'mg' }
      ]
    },
    'Maíz (dulce, cocido)': {
      kcal: 86, protein: 3.2, fat: 1.2, carbs: 19, fiber: 2.7,
      vitamins: [
        { name: 'Vitamina C', amount: 5, unit: 'mg' },
        { name: 'Vitamina B1', amount: 0.1, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 2, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Malanga': {
      kcal: 119, protein: 1.3, fat: 0.1, carbs: 28, fiber: 4.5,
      vitamins: [
        { name: 'Vitamina C', amount: 11, unit: 'mg' },
        { name: 'Vitamina A', amount: 60, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 34, unit: 'mg' },
        { name: 'Hierro', amount: 1.1, unit: 'mg' }
      ]
    },
    'Mandioca (Yuca)': {
      kcal: 160, protein: 1.4, fat: 0.3, carbs: 38, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 20, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Mejorana': {
      kcal: 265, protein: 9, fat: 4.3, carbs: 42, fiber: 69,
      vitamins: [
        { name: 'Vitamina A', amount: 800, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 20, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 250, unit: 'mg' },
        { name: 'Hierro', amount: 5, unit: 'mg' }
      ]
    },
    'Menta': {
      kcal: 70, protein: 3, fat: 0.2, carbs: 14, fiber: 8,
      vitamins: [
        { name: 'Vitamina A', amount: 450, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 31, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 150, unit: 'mg' },
        { name: 'Hierro', amount: 2, unit: 'mg' }
      ]
    },
    'Nabos': {
      kcal: 28, protein: 1, fat: 0.1, carbs: 6.2, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 21, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 43, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Nabo sueco': {
      kcal: 37, protein: 1.2, fat: 0.1, carbs: 8.6, fiber: 3,
      vitamins: [
        { name: 'Vitamina C', amount: 22, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 35, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Ñame': {
      kcal: 118, protein: 1.5, fat: 0.2, carbs: 27, fiber: 4.1,
      vitamins: [
        { name: 'Vitamina C', amount: 17, unit: 'mg' },
        { name: 'Vitamina A', amount: 50, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 25, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Okra': {
      kcal: 33, protein: 1.9, fat: 0.2, carbs: 7.5, fiber: 3.2,
      vitamins: [
        { name: 'Vitamina C', amount: 21, unit: 'mg' },
        { name: 'Vitamina K', amount: 53, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 77, unit: 'mg' },
        { name: 'Hierro', amount: 0.6, unit: 'mg' }
      ]
    },
    'Orégano (fresco)': {
      kcal: 40, protein: 2, fat: 0.5, carbs: 6, fiber: 3,
      vitamins: [
        { name: 'Vitamina C', amount: 7, unit: 'mg' },
        { name: 'Vitamina A', amount: 150, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 405, unit: 'mg' },
        { name: 'Hierro', amount: 6, unit: 'mg' }
      ]
    },
    'Ortiga': {
      kcal: 42, protein: 2.7, fat: 0.1, carbs: 6.9, fiber: 0.7,
      vitamins: [
        { name: 'Vitamina A', amount: 100, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 33, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 482, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Pak choi': {
      kcal: 13, protein: 1.5, fat: 0.2, carbs: 2.2, fiber: 1,
      vitamins: [
        { name: 'Vitamina A', amount: 200, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 45, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 105, unit: 'mg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Palmito': {
      kcal: 36, protein: 2, fat: 0.4, carbs: 5.2, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 3, unit: 'mg' },
        { name: 'Vitamina A', amount: 30, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 25, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Pepino': {
      kcal: 16, protein: 0.7, fat: 0.1, carbs: 3.6, fiber: 0.5,
      vitamins: [
        { name: 'Vitamina K', amount: 16, unit: 'µg' },
        { name: 'Vitamina C', amount: 2.8, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Perifollo': {
      kcal: 33, protein: 2, fat: 0.3, carbs: 5, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 15, unit: 'mg' },
        { name: 'Vitamina A', amount: 200, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 35, unit: 'mg' },
        { name: 'Hierro', amount: 1.0, unit: 'mg' }
      ]
    },
    'Perejil': {
      kcal: 36, protein: 3, fat: 0.8, carbs: 6.3, fiber: 3.3,
      vitamins: [
        { name: 'Vitamina C', amount: 133, unit: 'mg' },
        { name: 'Vitamina K', amount: 1640, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 138, unit: 'mg' },
        { name: 'Hierro', amount: 3.7, unit: 'mg' }
      ]
    },
    'Pimientos (rojo)': {
      kcal: 31, protein: 1, fat: 0.3, carbs: 6, fiber: 2.1,
      vitamins: [
        { name: 'Vitamina C', amount: 80, unit: 'mg' },
        { name: 'Vitamina A', amount: 313, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Puerro': {
      kcal: 61, protein: 1.5, fat: 0.3, carbs: 14, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 12, unit: 'mg' },
        { name: 'Vitamina A', amount: 100, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 59, unit: 'mg' },
        { name: 'Hierro', amount: 1.3, unit: 'mg' }
      ]
    },
    'Rábano (Rabanitos)': {
      kcal: 16, protein: 0.7, fat: 0.1, carbs: 3.4, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina C', amount: 18, unit: 'mg' },
        { name: 'Vitamina K', amount: 1.4, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 25, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Rábano daikon': {
      kcal: 16, protein: 0.7, fat: 0.1, carbs: 3.4, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina C', amount: 18, unit: 'mg' },
        { name: 'Vitamina K', amount: 1.4, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 25, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Rábano picante': {
      kcal: 48, protein: 1.2, fat: 0.1, carbs: 11, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina C', amount: 15, unit: 'mg' },
        { name: 'Vitamina A', amount: 100, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 30, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Radicchio': {
      kcal: 23, protein: 1, fat: 0.2, carbs: 4, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina K', amount: 250, unit: 'µg' },
        { name: 'Vitamina C', amount: 8, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 55, unit: 'mg' },
        { name: 'Hierro', amount: 0.9, unit: 'mg' }
      ]
    },
    'Remolacha': {
      kcal: 43, protein: 1.6, fat: 0.2, carbs: 9.6, fiber: 2.8,
      vitamins: [
        { name: 'Vitamina C', amount: 4, unit: 'mg' },
        { name: 'Vitamina A', amount: 33, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Romaine': {
      kcal: 17, protein: 1.2, fat: 0.3, carbs: 3.3, fiber: 2.1,
      vitamins: [
        { name: 'Vitamina A', amount: 436, unit: 'µg RE' },
        { name: 'Vitamina K', amount: 102, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 33, unit: 'mg' },
        { name: 'Hierro', amount: 0.97, unit: 'mg' }
      ]
    },
    'Romero (fresco)': {
      kcal: 40, protein: 1.5, fat: 0.3, carbs: 5, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 8, unit: 'mg' },
        { name: 'Vitamina A', amount: 60, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 57, unit: 'mg' },
        { name: 'Hierro', amount: 1, unit: 'mg' }
      ]
    },
    'Rúcula': {
      kcal: 25, protein: 2.6, fat: 0.7, carbs: 3.7, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina A', amount: 237, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 15, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 160, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Ruibarbo': {
      kcal: 21, protein: 0.9, fat: 0.2, carbs: 4.5, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 8, unit: 'mg' },
        { name: 'Vitamina K', amount: 86, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 86, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Salvia (fresca)': {
      kcal: 40, protein: 2, fat: 0.3, carbs: 5, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 26, unit: 'mg' },
        { name: 'Vitamina A', amount: 250, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 165, unit: 'mg' },
        { name: 'Hierro', amount: 1.6, unit: 'mg' }
      ]
    },
    'Taro': {
      kcal: 142, protein: 1.5, fat: 0.1, carbs: 34, fiber: 5,
      vitamins: [
        { name: 'Vitamina C', amount: 14, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 20, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Tomates': {
      kcal: 18, protein: 0.9, fat: 0.2, carbs: 3.9, fiber: 1.2,
      vitamins: [
        { name: 'Vitamina C', amount: 14, unit: 'mg' },
        { name: 'Vitamina A', amount: 42, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Tomillo (fresco)': {
      kcal: 40, protein: 2, fat: 0.3, carbs: 5, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 15, unit: 'mg' },
        { name: 'Vitamina A', amount: 80, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 100, unit: 'mg' },
        { name: 'Hierro', amount: 3, unit: 'mg' }
      ]
    },
    'Trébol': {
      kcal: 35, protein: 2, fat: 0.2, carbs: 4, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina C', amount: 30, unit: 'mg' },
        { name: 'Vitamina K', amount: 55, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Hierro', amount: 0.6, unit: 'mg' }
      ]
    },
    'Wakame': {
      kcal: 45, protein: 1, fat: 0.5, carbs: 9, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina A', amount: 210, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 10, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 150, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Zanahoria': {
      kcal: 41, protein: 0.9, fat: 0.2, carbs: 9.6, fiber: 2.8,
      vitamins: [
        { name: 'Vitamina A', amount: 835, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 33, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Castañas': {
      kcal: 131, protein: 1.7, fat: 1.4, carbs: 28, fiber: 5,
      vitamins: [
        { name: 'Vitamina C', amount: 40, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 30, unit: 'mg' },
        { name: 'Hierro', amount: 1.0, unit: 'mg' }
      ]
    }
  },
  fruits: {
    'Manzanas': {
      kcal: 52, protein: 0.3, fat: 0.2, carbs: 13.8, fiber: 2.4,
      vitamins: [
        { name: 'Vitamina C', amount: 4.6, unit: 'mg' },
        { name: 'Vitamina K', amount: 2.2, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 6, unit: 'mg' },
        { name: 'Hierro', amount: 0.12, unit: 'mg' }
      ]
    },
    'Plátanos': {
      kcal: 89, protein: 1.1, fat: 0.3, carbs: 22.8, fiber: 2.6,
      vitamins: [
        { name: 'Vitamina B6', amount: 0.4, unit: 'mg' },
        { name: 'Vitamina C', amount: 8.7, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 5, unit: 'mg' },
        { name: 'Hierro', amount: 0.26, unit: 'mg' }
      ]
    },
    'Naranjas': {
      kcal: 47, protein: 0.9, fat: 0.1, carbs: 11.8, fiber: 2.4,
      vitamins: [
        { name: 'Vitamina C', amount: 53.2, unit: 'mg' },
        { name: 'Vitamina A', amount: 225, unit: 'IU' }
      ],
      minerals: [
        { name: 'Calcio', amount: 40, unit: 'mg' },
        { name: 'Hierro', amount: 0.1, unit: 'mg' }
      ]
    },
    'Fresas': {
      kcal: 32, protein: 0.7, fat: 0.3, carbs: 7.7, fiber: 2,
      vitamins: [
        { name: 'Vitamina C', amount: 58.8, unit: 'mg' },
        { name: 'Vitamina K', amount: 2.2, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 16, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Arándanos': {
      kcal: 57, protein: 0.7, fat: 0.3, carbs: 14.5, fiber: 2.4,
      vitamins: [
        { name: 'Vitamina C', amount: 9.7, unit: 'mg' },
        { name: 'Vitamina K', amount: 19.3, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 6, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Uvas': {
      kcal: 69, protein: 0.7, fat: 0.2, carbs: 18.1, fiber: 0.9,
      vitamins: [
        { name: 'Vitamina C', amount: 10.8, unit: 'mg' },
        { name: 'Vitamina K', amount: 14.6, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.36, unit: 'mg' }
      ]
    },
    'Peras': {
      kcal: 57, protein: 0.4, fat: 0.1, carbs: 15.2, fiber: 3.1,
      vitamins: [
        { name: 'Vitamina C', amount: 4.3, unit: 'mg' },
        { name: 'Vitamina K', amount: 4.5, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 9, unit: 'mg' },
        { name: 'Hierro', amount: 0.2, unit: 'mg' }
      ]
    },
    'Melocotones': {
      kcal: 39, protein: 0.9, fat: 0.3, carbs: 9.5, fiber: 1.5,
      vitamins: [
        { name: 'Vitamina C', amount: 10, unit: 'mg' },
        { name: 'Vitamina A', amount: 326, unit: 'IU' }
      ],
      minerals: [
        { name: 'Calcio', amount: 6, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Kiwi': {
      kcal: 61, protein: 1.1, fat: 0.5, carbs: 14.7, fiber: 3,
      vitamins: [
        { name: 'Vitamina C', amount: 92.7, unit: 'mg' },
        { name: 'Vitamina E', amount: 1.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 34, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Mango': {
      kcal: 60, protein: 0.8, fat: 0.1, carbs: 15, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina A', amount: 54, unit: 'µg RE' },
        { name: 'Vitamina C', amount: 36.4, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 11, unit: 'mg' },
        { name: 'Hierro', amount: 0.16, unit: 'mg' }
      ]
    },
    'Piña': {
      kcal: 50, protein: 0.4, fat: 0.5, carbs: 13.1, fiber: 1.4,
      vitamins: [
        { name: 'Vitamina C', amount: 47.8, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.1, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 13, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Sandía': {
      kcal: 30, protein: 0.6, fat: 0.2, carbs: 7.6, fiber: 0.4,
      vitamins: [
        { name: 'Vitamina C', amount: 8.1, unit: 'mg' },
        { name: 'Vitamina A', amount: 28, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 7, unit: 'mg' },
        { name: 'Hierro', amount: 0.24, unit: 'mg' }
      ]
    },
    'Melón': {
      kcal: 34, protein: 0.8, fat: 0.2, carbs: 8.2, fiber: 0.9,
      vitamins: [
        { name: 'Vitamina C', amount: 36.7, unit: 'mg' },
        { name: 'Vitamina A', amount: 169, unit: 'IU' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.28, unit: 'mg' }
      ]
    },
    'Frambuesas': {
      kcal: 52, protein: 1.2, fat: 0.7, carbs: 11.9, fiber: 6.5,
      vitamins: [
        { name: 'Vitamina C', amount: 26.2, unit: 'mg' },
        { name: 'Vitamina K', amount: 7.8, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 25, unit: 'mg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Moras': {
      kcal: 43, protein: 1.4, fat: 0.5, carbs: 9.6, fiber: 5.3,
      vitamins: [
        { name: 'Vitamina C', amount: 21, unit: 'mg' },
        { name: 'Vitamina K', amount: 19, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 29, unit: 'mg' },
        { name: 'Hierro', amount: 1.1, unit: 'mg' }
      ]
    },
    'Cerezas': {
      kcal: 50, protein: 1, fat: 0.3, carbs: 12, fiber: 1.6,
      vitamins: [
        { name: 'Vitamina C', amount: 7, unit: 'mg' },
        { name: 'Vitamina A', amount: 64, unit: 'µg RE' }
      ],
      minerals: [
        { name: 'Calcio', amount: 15, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Mandarinas': {
      kcal: 53, protein: 0.8, fat: 0.3, carbs: 13.3, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina C', amount: 26.7, unit: 'mg' },
        { name: 'Vitamina A', amount: 681, unit: 'IU' }
      ],
      minerals: [
        { name: 'Calcio', amount: 37, unit: 'mg' },
        { name: 'Hierro', amount: 0.2, unit: 'mg' }
      ]
    },
    'Limones': {
      kcal: 29, protein: 1.1, fat: 0.3, carbs: 9.3, fiber: 2.8,
      vitamins: [
        { name: 'Vitamina C', amount: 53, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.08, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 26, unit: 'mg' },
        { name: 'Hierro', amount: 0.6, unit: 'mg' }
      ]
    },
    'Higos': {
      kcal: 74, protein: 0.8, fat: 0.9, carbs: 19.2, fiber: 2.9,
      vitamins: [
        { name: 'Vitamina K', amount: 15, unit: 'µg' },
        { name: 'Vitamina B6', amount: 0.11, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 35, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Granada': {
      kcal: 83, protein: 1.7, fat: 1.2, carbs: 19, fiber: 4,
      vitamins: [
        { name: 'Vitamina C', amount: 10, unit: 'mg' },
        { name: 'Vitamina K', amount: 16, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.3, unit: 'mg' }
      ]
    }
  },
  grains: {
    'Pan de trigo integral': {
      kcal: 263, protein: 9, fat: 2, carbs: 49, fiber: 6.5,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.4, unit: 'mg' },
        { name: 'Vitamina B3', amount: 4.6, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 107, unit: 'mg' },
        { name: 'Hierro', amount: 3.6, unit: 'mg' }
      ]
    },
    'Pasta de trigo integral (seca)': {
      kcal: 350, protein: 12, fat: 2, carbs: 70, fiber: 7,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.5, unit: 'mg' },
        { name: 'Vitamina B3', amount: 5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 30, unit: 'mg' },
        { name: 'Hierro', amount: 2, unit: 'mg' }
      ]
    },
    'Arroz integral (cocido)': {
      kcal: 111, protein: 2.6, fat: 0.9, carbs: 23, fiber: 1.8,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.12, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Avena (cruda)': {
      kcal: 389, protein: 16.9, fat: 6.9, carbs: 66.3, fiber: 10.6,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.6, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.1, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 54, unit: 'mg' },
        { name: 'Hierro', amount: 4.3, unit: 'mg' }
      ]
    },
    'Quinoa (cocida)': {
      kcal: 120, protein: 4.4, fat: 1.9, carbs: 21.3, fiber: 2.8,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.1, unit: 'mg' },
        { name: 'Vitamina B3', amount: 0.4, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 17, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Cebada (cocida)': {
      kcal: 123, protein: 2.3, fat: 0.4, carbs: 28.2, fiber: 3.8,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.1, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 3, unit: 'mg' },
        { name: 'Hierro', amount: 0.4, unit: 'mg' }
      ]
    },
    'Centeno integral': {
      kcal: 259, protein: 8, fat: 3.3, carbs: 48, fiber: 5.8,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.4, unit: 'mg' },
        { name: 'Vitamina B3', amount: 2.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 21, unit: 'mg' },
        { name: 'Hierro', amount: 2.5, unit: 'mg' }
      ]
    },
    'Maíz integral (palomitas)': {
      kcal: 387, protein: 12.9, fat: 4.5, carbs: 74, fiber: 14.5,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.15, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.6, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 7, unit: 'mg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Bulgur (seco)': {
      kcal: 342, protein: 12.3, fat: 1.3, carbs: 76, fiber: 18.3,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.3, unit: 'mg' },
        { name: 'Vitamina B3', amount: 3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 30, unit: 'mg' },
        { name: 'Hierro', amount: 2.5, unit: 'mg' }
      ]
    },
    'Farro (seco)': {
      kcal: 340, protein: 14, fat: 2.5, carbs: 65, fiber: 8,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.28, unit: 'mg' },
        { name: 'Vitamina B3', amount: 2.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 20, unit: 'mg' },
        { name: 'Hierro', amount: 3.0, unit: 'mg' }
      ]
    },
    'Mijo (seco)': {
      kcal: 378, protein: 11, fat: 4.2, carbs: 72.8, fiber: 8.5,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.4, unit: 'mg' },
        { name: 'Vitamina B3', amount: 2.7, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 8, unit: 'mg' },
        { name: 'Hierro', amount: 3.0, unit: 'mg' }
      ]
    },
    'Tortillas de maíz integral': {
      kcal: 218, protein: 5.4, fat: 2.5, carbs: 45, fiber: 7,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.2, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 45, unit: 'mg' },
        { name: 'Hierro', amount: 0.5, unit: 'mg' }
      ]
    },
    'Pan de centeno': {
      kcal: 259, protein: 8, fat: 3.3, carbs: 48, fiber: 5.8,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.35, unit: 'mg' },
        { name: 'Vitamina B3', amount: 3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 45, unit: 'mg' },
        { name: 'Hierro', amount: 2.5, unit: 'mg' }
      ]
    },
    'Salvado de avena': {
      kcal: 246, protein: 17.3, fat: 7, carbs: 66.2, fiber: 15.4,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.5, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 50, unit: 'mg' },
        { name: 'Hierro', amount: 4, unit: 'mg' }
      ]
    },
    'Trigo sarraceno (cocido)': {
      kcal: 92, protein: 3.4, fat: 0.6, carbs: 20, fiber: 3,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.1, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 18, unit: 'mg' },
        { name: 'Hierro', amount: 1.3, unit: 'mg' }
      ]
    },
    'Arroz blanco (cocido)': {
      kcal: 130, protein: 2.7, fat: 0.3, carbs: 28, fiber: 0.4, type: 'limit',
      vitamins: [
        { name: 'Vitamina B1', amount: 0.07, unit: 'mg' },
        { name: 'Vitamina B3', amount: 1.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 10, unit: 'mg' },
        { name: 'Hierro', amount: 0.2, unit: 'mg' }
      ]
    },
    'Pan blanco': {
      kcal: 265, protein: 9, fat: 3.2, carbs: 49, fiber: 2.7, type: 'limit',
      vitamins: [
        { name: 'Vitamina B1', amount: 0.4, unit: 'mg' },
        { name: 'Vitamina B3', amount: 3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 100, unit: 'mg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    }
  },
  protein: {
    'Salmón': {
      kcal: 175, protein: 20, fat: 10, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 13, unit: 'µg' },
        { name: 'Vitamina B12', amount: 3.2, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 36.5, unit: 'µg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Sardinas (en aceite)': {
      kcal: 208, protein: 25, fat: 11, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 4.8, unit: 'µg' },
        { name: 'Vitamina B12', amount: 8.9, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 382, unit: 'mg' },
        { name: 'Hierro', amount: 2.9, unit: 'mg' }
      ]
    },
    'Caballa (Verdel)': {
      kcal: 205, protein: 19, fat: 13, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 10, unit: 'µg' },
        { name: 'Vitamina B12', amount: 7.0, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 40, unit: 'µg' },
        { name: 'Hierro', amount: 1.5, unit: 'mg' }
      ]
    },
    'Atún (fresco)': {
      kcal: 132, protein: 28, fat: 1, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 5, unit: 'µg' },
        { name: 'Vitamina B12', amount: 2.6, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 60, unit: 'µg' },
        { name: 'Hierro', amount: 1.3, unit: 'mg' }
      ]
    },
    'Arenque': {
      kcal: 158, protein: 18, fat: 9, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 7, unit: 'µg' },
        { name: 'Vitamina B12', amount: 12, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 45, unit: 'µg' },
        { name: 'Hierro', amount: 2, unit: 'mg' }
      ]
    },
    'Boquerón (anchoa fresca)': {
      kcal: 160, protein: 18, fat: 9, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 8, unit: 'µg' },
        { name: 'Vitamina B12', amount: 10, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 210, unit: 'mg' },
        { name: 'Hierro', amount: 1.8, unit: 'mg' }
      ]
    },
    'Trucha': {
      kcal: 148, protein: 20, fat: 7, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 5, unit: 'µg' },
        { name: 'Vitamina B12', amount: 3.5, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 26, unit: 'µg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Palometa (Llampuga)': {
      kcal: 150, protein: 20, fat: 7, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 4, unit: 'µg' },
        { name: 'Vitamina B12', amount: 2, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 28, unit: 'µg' },
        { name: 'Hierro', amount: 1.0, unit: 'mg' }
      ]
    },
    'Anguila': {
      kcal: 184, protein: 18, fat: 11, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 20, unit: 'µg' },
        { name: 'Vitamina B12', amount: 11, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 40, unit: 'µg' },
        { name: 'Hierro', amount: 1.2, unit: 'mg' }
      ]
    },
    'Jurel (Chicharro)': {
      kcal: 155, protein: 18, fat: 10, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 6, unit: 'µg' },
        { name: 'Vitamina B12', amount: 8, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 35, unit: 'µg' },
        { name: 'Hierro', amount: 1.1, unit: 'mg' }
      ]
    },
    'Emperador (Pez espada)': {
      kcal: 175, protein: 20, fat: 10, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 4, unit: 'µg' },
        { name: 'Vitamina B12', amount: 2.7, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 40, unit: 'µg' },
        { name: 'Hierro', amount: 0.9, unit: 'mg' }
      ]
    },
    'Bonito del norte': {
      kcal: 130, protein: 28, fat: 1, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 5, unit: 'µg' },
        { name: 'Vitamina B12', amount: 3, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 35, unit: 'µg' },
        { name: 'Hierro', amount: 1, unit: 'mg' }
      ]
    },
    'Merluza': {
      kcal: 85, protein: 18, fat: 1, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 2, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.5, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 17, unit: 'µg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Bacalao (fresco)': {
      kcal: 82, protein: 18, fat: 0.7, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 1.8, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.5, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 18, unit: 'µg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Lenguado': {
      kcal: 91, protein: 17, fat: 2, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 1.6, unit: 'µg' },
        { name: 'Vitamina B12', amount: 0.8, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 12, unit: 'µg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Gallo': {
      kcal: 90, protein: 17, fat: 2, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 1.6, unit: 'µg' },
        { name: 'Vitamina B12', amount: 0.8, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 12, unit: 'µg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Lubina': {
      kcal: 97, protein: 18, fat: 2, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 2, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.1, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 15, unit: 'µg' },
        { name: 'Hierro', amount: 0.9, unit: 'mg' }
      ]
    },
    'Dorada': {
      kcal: 105, protein: 17, fat: 2, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 3, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.2, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 20, unit: 'µg' },
        { name: 'Hierro', amount: 1.1, unit: 'mg' }
      ]
    },
    'Rape': {
      kcal: 90, protein: 18, fat: 1, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 1.5, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.0, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 15, unit: 'µg' },
        { name: 'Hierro', amount: 0.7, unit: 'mg' }
      ]
    },
    'Abadejo (Pescadilla)': {
      kcal: 87, protein: 17, fat: 0.9, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 1.8, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.2, unit: 'µg' }
      ],
      minerals: [
        { name: 'Selenio', amount: 14, unit: 'µg' },
        { name: 'Hierro', amount: 0.8, unit: 'mg' }
      ]
    },
    'Pollo (sin piel, cocido)': {
      kcal: 165, protein: 31, fat: 3.6, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina B6', amount: 0.5, unit: 'mg' },
        { name: 'Vitamina B12', amount: 0.3, unit: 'µg' }
      ],
      minerals: [
        { name: 'Fósforo', amount: 210, unit: 'mg' },
        { name: 'Hierro', amount: 1.2, unit: 'mg' }
      ]
    },
    'Pavo (sin piel, cocido)': {
      kcal: 135, protein: 29, fat: 1, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina B6', amount: 0.7, unit: 'mg' },
        { name: 'Vitamina B12', amount: 0.4, unit: 'µg' }
      ],
      minerals: [
        { name: 'Fósforo', amount: 220, unit: 'mg' },
        { name: 'Hierro', amount: 1.1, unit: 'mg' }
      ]
    },
    'Legumbres (genérico, cocido)': {
      kcal: 127, protein: 8.7, fat: 0.5, carbs: 22.8, fiber: 6.4,
      vitamins: [
        { name: 'Vitamina B9', amount: 130, unit: 'µg' },
        { name: 'Vitamina B1', amount: 0.3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 50, unit: 'mg' },
        { name: 'Hierro', amount: 2.5, unit: 'mg' }
      ]
    },
    'Lentejas (cocidas)': {
      kcal: 116, protein: 9, fat: 0.4, carbs: 20, fiber: 7.9,
      vitamins: [
        { name: 'Vitamina B9', amount: 181, unit: 'µg' },
        { name: 'Vitamina B1', amount: 0.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 19, unit: 'mg' },
        { name: 'Hierro', amount: 3.3, unit: 'mg' }
      ]
    },
    'Garbanzos (cocidos)': {
      kcal: 139, protein: 7.3, fat: 2.4, carbs: 23.7, fiber: 7.6,
      vitamins: [
        { name: 'Vitamina B9', amount: 172, unit: 'µg' },
        { name: 'Vitamina B1', amount: 0.1, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 49, unit: 'mg' },
        { name: 'Hierro', amount: 2.9, unit: 'mg' }
      ]
    },
    'Habichuelas (Frijoles, cocido)': {
      kcal: 127, protein: 8.7, fat: 0.5, carbs: 22.8, fiber: 6.4,
      vitamins: [
        { name: 'Vitamina B9', amount: 130, unit: 'µg' },
        { name: 'Vitamina B1', amount: 0.3, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 50, unit: 'mg' },
        { name: 'Hierro', amount: 2.5, unit: 'mg' }
      ]
    },
    'Soja (grano seco)': {
      kcal: 446, protein: 36.5, fat: 19.9, carbs: 30.2, fiber: 9.3,
      vitamins: [
        { name: 'Vitamina B9', amount: 375, unit: 'µg' },
        { name: 'Vitamina K', amount: 47, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 277, unit: 'mg' },
        { name: 'Hierro', amount: 15.7, unit: 'mg' }
      ]
    },
    'Edamame (Soja verde, cocido)': {
      kcal: 121, protein: 11.9, fat: 5.2, carbs: 8.9, fiber: 5.2,
      vitamins: [
        { name: 'Vitamina C', amount: 5, unit: 'mg' },
        { name: 'Vitamina K', amount: 26, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 63, unit: 'mg' },
        { name: 'Hierro', amount: 2.3, unit: 'mg' }
      ]
    },
    'Tofu': {
      kcal: 76, protein: 8.1, fat: 4.8, carbs: 1.9, fiber: 0.3,
      vitamins: [
        { name: 'Vitamina B1', amount: 0.1, unit: 'mg' },
        { name: 'Vitamina B9', amount: 15, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 350, unit: 'mg' },
        { name: 'Hierro', amount: 1.2, unit: 'mg' }
      ]
    },
    'Tempeh': {
      kcal: 195, protein: 20.3, fat: 11.4, carbs: 9.4, fiber: 6,
      vitamins: [
        { name: 'Vitamina B2', amount: 0.2, unit: 'mg' },
        { name: 'Vitamina B9', amount: 35, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 111, unit: 'mg' },
        { name: 'Hierro', amount: 2.7, unit: 'mg' }
      ]
    },
    'Huevos (por 100g)': {
      kcal: 143, protein: 12.6, fat: 9.5, carbs: 0.7, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 2, unit: 'µg' },
        { name: 'Vitamina B12', amount: 1.1, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 50, unit: 'mg' },
        { name: 'Hierro', amount: 1.2, unit: 'mg' }
      ]
    },
    'Yogur griego (natural)': {
      kcal: 59, protein: 10, fat: 0.4, carbs: 3.6, fiber: 0,
      vitamins: [
        { name: 'Vitamina B2', amount: 0.2, unit: 'mg' },
        { name: 'Vitamina B12', amount: 0.8, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 110, unit: 'mg' },
        { name: 'Potasio', amount: 141, unit: 'mg' }
      ]
    },
    'Queso cottage (bajo grasa)': {
      kcal: 98, protein: 11.1, fat: 4.3, carbs: 3.4, fiber: 0,
      vitamins: [
        { name: 'Vitamina B12', amount: 0.8, unit: 'µg' },
        { name: 'Vitamina A', amount: 160, unit: 'IU' }
      ],
      minerals: [
        { name: 'Calcio', amount: 125, unit: 'mg' },
        { name: 'Fósforo', amount: 160, unit: 'mg' }
      ]
    },
    'Almendras': {
      kcal: 579, protein: 21.2, fat: 49.9, carbs: 21.6, fiber: 12.2,
      vitamins: [
        { name: 'Vitamina E', amount: 25.6, unit: 'mg' },
        { name: 'Vitamina B2', amount: 1.1, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 264, unit: 'mg' },
        { name: 'Hierro', amount: 3.7, unit: 'mg' }
      ]
    },
    'Anacardos': {
      kcal: 553, protein: 18.2, fat: 43.9, carbs: 30.2, fiber: 3.3,
      vitamins: [
        { name: 'Vitamina E', amount: 0.9, unit: 'mg' },
        { name: 'Vitamina B1', amount: 0.4, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 37, unit: 'mg' },
        { name: 'Hierro', amount: 6.7, unit: 'mg' }
      ]
    },
    'Pistachos': {
      kcal: 562, protein: 20.2, fat: 45.3, carbs: 27.5, fiber: 10.6,
      vitamins: [
        { name: 'Vitamina B6', amount: 1.7, unit: 'mg' },
        { name: 'Vitamina E', amount: 2.9, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 105, unit: 'mg' },
        { name: 'Hierro', amount: 4, unit: 'mg' }
      ]
    },
    'Nueces (genérico)': {
      kcal: 654, protein: 15.2, fat: 65.2, carbs: 13.7, fiber: 6.7,
      vitamins: [
        { name: 'Vitamina E', amount: 0.7, unit: 'mg' },
        { name: 'Vitamina B6', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 98, unit: 'mg' },
        { name: 'Hierro', amount: 2.9, unit: 'mg' }
      ]
    },
    'Semillas (mix genérico)': {
      kcal: 486, protein: 16.5, fat: 30.7, carbs: 42.1, fiber: 34.4,
      vitamins: [
        { name: 'Vitamina E', amount: 0.5, unit: 'mg' },
        { name: 'Vitamina B1', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 150, unit: 'mg' },
        { name: 'Hierro', amount: 5, unit: 'mg' }
      ]
    },
    'Carne de res magra (cocida)': {
      kcal: 250, protein: 26, fat: 15, carbs: 0, fiber: 0, type: 'limit',
      vitamins: [
        { name: 'Vitamina B12', amount: 2, unit: 'µg' },
        { name: 'Vitamina B6', amount: 0.5, unit: 'mg' }
      ],
      minerals: [
        { name: 'Hierro', amount: 2.7, unit: 'mg' },
        { name: 'Zinc', amount: 4.6, unit: 'mg' }
      ]
    },
    'Cerdo magro (cocido)': {
      kcal: 242, protein: 27, fat: 10, carbs: 0, fiber: 0, type: 'limit',
      vitamins: [
        { name: 'Vitamina B12', amount: 0.7, unit: 'µg' },
        { name: 'Vitamina B6', amount: 0.4, unit: 'mg' }
      ],
      minerals: [
        { name: 'Hierro', amount: 1.2, unit: 'mg' },
        { name: 'Zinc', amount: 3.3, unit: 'mg' }
      ]
    },
    'Carnes procesadas (genérico)': {
      kcal: 400, protein: 15, fat: 35, carbs: 1, fiber: 0, type: 'avoid',
      vitamins: [],
      minerals: []
    },
    'Queso (genérico medio-graso)': {
      kcal: 350, protein: 25, fat: 25, carbs: 2, fiber: 0, type: 'limit',
      vitamins: [
        { name: 'Vitamina A', amount: 200, unit: 'IU' },
        { name: 'Vitamina B12', amount: 1.3, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 500, unit: 'mg' },
        { name: 'Fósforo', amount: 350, unit: 'mg' }
      ]
    },
    'Leche entera': {
      kcal: 60, protein: 3.4, fat: 3.3, carbs: 4.8, fiber: 0, type: 'limit',
      vitamins: [
        { name: 'Vitamina D', amount: 1.2, unit: 'µg' },
        { name: 'Vitamina B2', amount: 0.18, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 113, unit: 'mg' },
        { name: 'Fósforo', amount: 95, unit: 'mg' }
      ]
    }
  },
  oils: {
    'Aceite de oliva virgen extra': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 14, unit: 'mg' },
        { name: 'Vitamina K', amount: 60, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de aguacate': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 10, unit: 'mg' },
        { name: 'Vitamina K', amount: 80, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de cacahuete': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 8, unit: 'mg' },
        { name: 'Vitamina K', amount: 20, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de girasol': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 41, unit: 'mg' },
        { name: 'Vitamina K', amount: 5, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de soja': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 8, unit: 'mg' },
        { name: 'Vitamina K', amount: 7, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de maíz': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 7, unit: 'mg' },
        { name: 'Vitamina K', amount: 8, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de sésamo': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 1.5, unit: 'mg' },
        { name: 'Vitamina K', amount: 60, unit: 'µg' }
      ],
      minerals: []
    },
    'Aceite de linaza': {
      kcal: 44, protein: 0, fat: 5, carbs: 0, fiber: 0,
      vitamins: [
        { name: 'Vitamina E', amount: 0.3, unit: 'mg' },
        { name: 'Vitamina K', amount: 18, unit: 'µg' }
      ],
      minerals: []
    },
    'Aguacate': {
      kcal: 160, protein: 2, fat: 15, carbs: 9, fiber: 7,
      vitamins: [
        { name: 'Vitamina E', amount: 2.7, unit: 'mg' },
        { name: 'Vitamina K', amount: 21, unit: 'µg' }
      ],
      minerals: [
        { name: 'Potasio', amount: 485, unit: 'mg' }
      ]
    },
    'Mantequilla': {
      kcal: 35.85, protein: 0.045, fat: 4.05, carbs: 0.005, fiber: 0, type: 'limit',
      vitamins: [
        { name: 'Vitamina A', amount: 684, unit: 'µg RE' },
        { name: 'Vitamina D', amount: 1, unit: 'µg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 24, unit: 'mg' }
      ]
    },
    'Margarina': {
      kcal: 35.85, protein: 0.01, fat: 4, carbs: 0.025, fiber: 0, type: 'limit',
      vitamins: [
        { name: 'Vitamina A', amount: 500, unit: 'µg RE' },
        { name: 'Vitamina D', amount: 0.5, unit: 'µg' }
      ],
      minerals: []
    }
  },
  drinks: {
    'Agua': {
      kcal: 0, protein: 0, fat: 0, carbs: 0, fiber: 0,
      vitamins: [],
      minerals: []
    },
    'Café (solo)': {
      kcal: 2, protein: 0.1, fat: 0, carbs: 0, fiber: 0,
      vitamins: [],
      minerals: [
        { name: 'Magnesio', amount: 2, unit: 'mg' }
      ]
    },
    'Té (sin azúcar)': {
      kcal: 1, protein: 0.1, fat: 0, carbs: 0.2, fiber: 0,
      vitamins: [],
      minerals: [
        { name: 'Fluoruro', amount: 0.3, unit: 'mg' }
      ]
    },
    'Zumos de fruta (genérico)': {
      kcal: 45, protein: 0.5, fat: 0.1, carbs: 10, fiber: 0.2, type: 'limit',
      vitamins: [
        { name: 'Vitamina C', amount: 30, unit: 'mg' }
      ],
      minerals: [
        { name: 'Potasio', amount: 200, unit: 'mg' }
      ]
    },
    'Bebidas azucaradas (refresco)': {
      kcal: 40, protein: 0, fat: 0, carbs: 10, fiber: 0, type: 'avoid',
      vitamins: [],
      minerals: []
    },
    'Leche desnatada': {
      kcal: 35, protein: 3.4, fat: 0.1, carbs: 5, fiber: 0,
      vitamins: [
        { name: 'Vitamina D', amount: 1.5, unit: 'µg' },
        { name: 'Vitamina B2', amount: 0.2, unit: 'mg' }
      ],
      minerals: [
        { name: 'Calcio', amount: 125, unit: 'mg' },
        { name: 'Fósforo', amount: 100, unit: 'mg' }
      ]
    }
  }
};

// Nota: Los valores en vitaminas y minerales son aproximados y se basan en datos medios de fuentes oficiales como BEDCA, CIQUAL y otras bases reconocidas.
// Te recomiendo consultar dichas bases para obtener valores específicos y actualizados según el alimento y su variedad.
// --- APPLICATION CONFIGURATION ---
        const foods = { // Keep original structure for dropdown population and flags
             vegetables: ["Acelga", "Achicoria", "Ajo", "Alcaparras", "Alcachofas", "Alfalfa (Brotes)", "Algas", "Apio", "Apio nabo", /*"Apionabo",*/ "Arrurruz", "Arvejas", "Bambú (brotes)", "Batata", "Berenjena", "Berro", "Boniatos", "Borraja", "Brócoli", "Calabacín", "Calabaza", "Canónigos", "Cardo", "Cardo mariano", "Castañas", "Cebolla", "Champiñones", "Champiñones silvestres", "Chirivía", "Col china", "Coles", "Coles de Bruselas", "Coliflor", "Colinabo", "Cúrcuma", "Diente de león", "Edamame", "Endivia", "Eneldo", "Escarola", "Espárragos", "Espinaca", /*"Faneca",*/ "Frijoles", "Galanga", "Grelos", "Guisantes", "Habas", "Hinojo", "Hisopo", "Hojas de mostaza", "Hongos", /*"Hortalizas de hoja verde", "Hortalizas de raíz", "Hortalizas de tallo",*/ "Jengibre", "Jícama", "Judías verdes", /*"Kion", "Kohlrabi", "Lavanda",*/ "Lechuga", "Lentejas", "Maíz", "Malanga", "Mandioca", "Mejorana", "Menta", "Nabos", "Nabo sueco", "Ñame", "Okra", "Orégano", "Ortiga", /*"Otoe",*/ "Pak choi", "Palmito", "Pepino", "Perejil", "Perifollo", "Pimientos", "Puerro", "Rabanitos", "Rábano", "Rábano daikon", "Rábano picante", "Radicchio", "Remolacha", "Remolacha azucarera", "Repollo", "Romaine", "Romero", "Rúcula", "Ruibarbo", /*"Salicornia",*/ "Salvia", /*"Samphire",*/ "Setas", "Soja", "Soja verde", "Taro", "Tomates", "Tomillo", /*"Topinambur",*/ "Trébol", /*"Verdolaga",*/ "Wakame", "Yautía", "Yuca", "Zanahoria", "Zanahoria blanca", /*"Zapallo"*/], // Removed duplicates/generic terms if specific exists
            fruits: ["Arándanos", "Cerezas", "Frambuesas", "Fresas", "Granada", "Higos", "Kiwi", "Limones", "Mandarinas", "Mango", "Manzanas", "Melocotones", "Melón", "Moras", "Naranjas", "Peras", "Piña", "Plátanos", "Sandía", "Uvas", { name: "Zumos", limited: true }],
            grains: ["Arroz integral", "Avena", "Bulgur", "Cebada", "Centeno integral", "Farro", "Maíz integral (palomitas de maíz)", "Mijo", "Pan de centeno", "Pan de trigo integral", "Pasta de trigo integral", "Quinoa", "Salvado de avena", "Tortillas de maíz integral", "Trigo sarraceno", { name: "Arroz blanco", limited: true }, { name: "Pan blanco", limited: true }],
            protein: ["Abadejo", "Almendras", "Anacardos", "Anguila", "Arenque", "Atún (fresco)", "Bacalao", "Bonito del norte", "Boquerón (anchoa fresca)", "Caballa", /*"Carne de res magra",*/ { name: "Carnes rojas", limited: true }, { name: "Carnes procesadas (tocineta, fiambres, etc.)", limited: true, avoid: true }, "Cerdo magro", { name: "Queso", limited: true }, { name: "Queso cottage (bajo en grasa)", limited: false }, "Edamame", "Emperador (pez espada)", "Gallo", "Garbanzos", "Guisantes", "Habichuelas", "Huevos", "Jurel", "Legumbres", "Lenguado", "Lentejas", { name: "Leche y lácteos", limited: true }, "Lubina", "Merluza", "Nueces", "Palometa", "Pescadilla", "Pistachos", "Pollo (sin piel)", "Rape", "Salmón", "Sardinas", "Semillas", "Tempeh", "Tofu", "Trucha", "Pavo (sin piel)", "Yogur griego (natural, sin azúcar añadido)"], // Simplified names
            oils: ["Aguacate","Aceite de aguacate", "Aceite de cacahuete", "Aceite de girasol", "Aceite de linaza", "Aceite de maíz", "Aceite de oliva (virgen extra)", "Aceite de sésamo", "Aceite de soja", { name: "Mantequilla", limited: true }, { name: "Margarina", limited: true, avoid: true }],
            drinks: ["Agua", "Café (sin o con poco azúcar)", "Té (sin o con poco azúcar)", { name: "Bebidas azucaradas", limited: true, avoid: true }]
        };

        const categoryLimits = {
            vegetables: 5, fruits: 3, grains: 3, protein: 3
        };

        // --- APPLICATION STATE ---
        // Now stores objects: { name: string, category: string, nutrition: object | null }
        let currentPlate = {
            vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: []
        };
        let notificationTimeout = null;

        // Macronutrient target ranges
        const macroTargets = { /* ... (same as before) ... */ };
        // Category limits
        const categoryLimits = { /* ... (same as before) ... */ };

        // --- DOM Elements ---
        const selectors = { // Select dropdowns
            vegetables: document.getElementById('vegetables-select'),
            fruits: document.getElementById('fruits-select'),
            grains: document.getElementById('grains-select'),
            protein: document.getElementById('protein-select'),
            oils: document.getElementById('oils-select'),
            drinks: document.getElementById('drinks-select')};
        const lists = { // UL elements for displaying selected items
            vegetables: document.getElementById('vegetables-list'),
            fruits: document.getElementById('fruits-list'),
            grains: document.getElementById('grains-list'),
            protein: document.getElementById('protein-list'),
            oils: document.getElementById('oils-list'),
            drinks: document.getElementById('drinks-list')};
        const notification = document.getElementById('notification');
        const analysisResultsDiv = document.getElementById('analysis-results');
        const analyzeBtn = document.getElementById('analyze-button');
        const saveBtn = document.getElementById('save-button');
        const loadBtn = document.getElementById('load-button');
        const printBtn = document.getElementById('print-button');
        const clearBtn = document.getElementById('clear-button');
        const objectiveSelect = document.getElementById('objective-select');
        const activityLevelSelect = document.getElementById('activity-level-select');
        // Added daily calorie input element
        const dailyCaloriesInput = document.getElementById('daily-calories-input');

        // --- State ---
        let currentPlate = { vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: []};

        // --- Functions ---

        function populateSelectors() {for (const category in foods) {
                const selectElement = selectors[category];
                if (!selectElement) continue;

                const sortedFoods = [...foods[category]].sort((a, b) => {
                    const nameA = typeof a === 'string' ? a : a.name;
                    const nameB = typeof b === 'string' ? b : b.name;
                    return nameA.localeCompare(nameB, 'es', { sensitivity: 'base' });
                });

                sortedFoods.forEach(food => {
                    const option = document.createElement('option');
                    let displayName = '';
                    let valueName = '';
                    let isLimited = false;
                    let isAvoid = false;

                    if (typeof food === 'string') {
                        valueName = food;
                        displayName = food;
                    } else {
                        valueName = food.name;
                        displayName = food.name;
                        isLimited = food.limited || false;
                        isAvoid = food.avoid || false;
                        if (isAvoid) displayName += ' (evitar)';
                        else if (isLimited) displayName += ' (limitar)';
                        option.dataset.limited = isLimited;
                        option.dataset.avoid = isAvoid;
                        if (isAvoid) option.classList.add('text-red-600', 'font-semibold');
                        else if (isLimited) option.classList.add('text-yellow-600');
                    }
                    option.value = valueName;
                    option.textContent = displayName;
                    selectElement.appendChild(option);
                });
            }
        } 
        function addFood(category) {const selectElement = selectors[category];
            const listElement = lists[category];
            const selectedValue = selectElement.value;

            if (!selectedValue) {
                 showNotification('Por favor, selecciona un alimento.', 2000, true);
                 return;
            }
             if (!listElement) {
                 console.error(`List element not found for category: ${category}`);
                 return;
             }

            const limit = categoryLimits[category];
            if (limit !== undefined && currentPlate[category].length >= limit) {
                 const categoryName = category === 'vegetables' ? 'vegetales' : category === 'fruits' ? 'frutas' : category === 'grains' ? 'granos' : 'proteínas';
                 showNotification(`Máximo de ${limit} ${categoryName} alcanzado.`, 3000, true);
                 selectElement.value = "";
                 return;
            }

            // Check for duplicates using the 'name' property of the objects
            if (currentPlate[category].some(item => item.name === selectedValue)) {
                 const categoryNameFriendly = category === 'vegetables' ? 'vegetales' : category === 'fruits' ? 'frutas' : category === 'grains' ? 'granos integrales' : category === 'protein' ? 'proteína saludable' : category === 'oils' ? 'aceites saludables' : 'bebidas';
                 showNotification(`${selectedValue} ya está en la sección de ${categoryNameFriendly}.`, 2500, true);
                 selectElement.value = "";
                 return;
            }}
        function removeFood(category, foodName) { / Filter out the item to remove based on its name
            currentPlate[category] = currentPlate[category].filter(item => item.name !== foodName);
            renderPlate();}
        function renderPlate() { for (const category in lists) {
                const listElement = lists[category];
                if (!listElement) continue;

                listElement.innerHTML = '';

                // Iterate over the array of food objects for the category
                currentPlate[category].forEach(foodItem => {
                    const foodName = foodItem.name; // Get the name from the object
                    const li = document.createElement('li');
                    const textSpan = document.createElement('span');
                    textSpan.textContent = foodName;

                    // Find the original food config to check for limited/avoid flags
                    const foodConfig = foods[category].find(f => (typeof f === 'string' ? f : f.name) === foodName);
                    if (typeof foodConfig === 'object') {
                         if(foodConfig.avoid) textSpan.classList.add('avoid-item');
                         else if (foodConfig.limited) textSpan.classList.add('limited-item');
                    }

                    li.appendChild(textSpan);

                    const removeBtn = document.createElement('button');
                    removeBtn.innerHTML = '&times;';
                    removeBtn.setAttribute('aria-label', `Eliminar ${foodName}`);
                    // Pass the name to removeFood
                    removeBtn.onclick = () => removeFood(category, foodName);
                    li.appendChild(removeBtn);

                    listElement.appendChild(li);
                });}

        /**
         * Analyzes the nutritional content and balance of the current plate.
         */
        function analyzePlate() {
            console.log("[Analyze] Starting plate analysis...");
            let total = { calories: 0, protein: 0, fat: 0, carbs: 0, fiber: 0 };
            let foodCount = 0;
            let foodItemsWithData = 0; // Count items actually used for calculation
            let plateItems = { vegFruit: 0, grains: 0, protein: 0 };
            let includedItems = { oils: false, water: false, avoid: 0, limit: 0 };

            // Aggregate nutritional data and count items
            for (const category in currentPlate) {
                currentPlate[category].forEach(foodName => {
                    foodCount++;
                    const data = foodData[category]?.[foodName];
                    if (data) {
                        // Ensure values are numbers before adding
                        const kcal = Number(data.kcal) || 0;
                        const prot = Number(data.protein) || 0;
                        const fat = Number(data.fat) || 0;
                        const carb = Number(data.carbs) || 0;
                        const fib = Number(data.fiber) || 0;

                        // Only count item if it has calorie data (basic check)
                        if (kcal > 0 || prot > 0 || fat > 0 || carb > 0) {
                             foodItemsWithData++;
                             total.calories += kcal;
                             total.protein += prot;
                             total.fat += fat;
                             total.carbs += carb;
                             total.fiber += fib;
                        } else if (foodName === 'Agua') {
                            // Still count water even if 0 kcal
                            foodItemsWithData++;
                        }


                        // Count items for main plate proportions
                        if (category === 'vegetables' || category === 'fruits') {
                            plateItems.vegFruit++;
                        } else if (category === 'grains') {
                            plateItems.grains++;
                        } else if (category === 'protein') {
                            plateItems.protein++;
                        }

                        // Check for specific inclusions/types
                        if (category === 'oils' && foodName !== 'Aguacate' && foodName !== 'Mantequilla' && foodName !== 'Margarina') includedItems.oils = true;
                        if (foodName === 'Agua') includedItems.water = true;
                        if (data.type === 'avoid') includedItems.avoid++;
                        if (data.type === 'limit') includedItems.limit++;

                    } else {
                         console.warn(`[Analyze] Nutritional data not found for: ${foodName} in ${category}`);
                    }
                });
            }

            console.log("[Analyze] Raw Totals:", total);
            console.log("[Analyze] Plate Counts:", plateItems);
            console.log("[Analyze] Included Items:", includedItems);
            console.log(`[Analyze] Food Count: ${foodCount}, Items with Data: ${foodItemsWithData}`);

            // --- Get User Context ---
            const selectedObjective = objectiveSelect.value;
            const selectedActivityLevel = activityLevelSelect.value;
            const dailyCaloriesGoal = Number(dailyCaloriesInput.value) || 0; // Get daily goal
            const targets = macroTargets[selectedActivityLevel]?.[selectedObjective];

            console.log(`[Analyze] Context - Objective: ${selectedObjective}, Activity: ${selectedActivityLevel}, Daily Goal: ${dailyCaloriesGoal}`);

            // --- Initial HTML Structure ---
             let analysisHTML = `<h3 class="text-xl font-bold mb-4 text-gray-700 text-center">Análisis Detallado</h3>`; // Main title

            if (foodCount === 0) {
                analysisResultsDiv.innerHTML = `
                    <h3 class="text-xl font-bold mb-4 text-gray-700 text-center">Análisis del Plato</h3>
                    <p class="text-gray-500 italic text-center">Añade alimentos, define tu contexto y haz clic en "Analizar Plato" para ver los resultados.</p>`;
                showNotification("Añade alimentos antes de analizar.", true);
                return;
            }

            // --- Calculate Proportions ---
            const totalPlateItems = plateItems.vegFruit + plateItems.grains + plateItems.protein;
            const vegFruitPercent = totalPlateItems > 0 ? ((plateItems.vegFruit / totalPlateItems) * 100).toFixed(0) : 0;
            const grainsPercent = totalPlateItems > 0 ? ((plateItems.grains / totalPlateItems) * 100).toFixed(0) : 0;
            const proteinPercentPlate = totalPlateItems > 0 ? ((plateItems.protein / totalPlateItems) * 100).toFixed(0) : 0; // Use different var name

            // --- Calculate Score (Simple Heuristic) ---
            let score = 0;
            const maxScore = 100;
            // Proportions (Max 30 points)
            if (totalPlateItems > 0) {
                if (vegFruitPercent >= 40 && vegFruitPercent <= 60) score += 15; else score += 5; // Ideal 50%
                if (grainsPercent >= 20 && grainsPercent <= 30) score += 7.5; // Ideal 25%
                if (proteinPercentPlate >= 20 && proteinPercentPlate <= 30) score += 7.5; // Ideal 25%
            }
            // Macronutrient Balance (Max 30 points, only if targets exist)
             const proteinCalories = total.protein * 4;
             const fatCalories = total.fat * 9;
             const carbCalories = total.carbs * 4;
             const totalMacroCalories = proteinCalories + fatCalories + carbCalories;
             const macroProtPercent = totalMacroCalories > 0 ? parseFloat(((proteinCalories / totalMacroCalories) * 100).toFixed(1)) : 0;
             const macroFatPercent = totalMacroCalories > 0 ? parseFloat(((fatCalories / totalMacroCalories) * 100).toFixed(1)) : 0;
             const macroCarbPercent = totalMacroCalories > 0 ? parseFloat(((carbCalories / totalMacroCalories) * 100).toFixed(1)) : 0;

            if (targets) {
                 if (macroCarbPercent >= targets.carbs[0] && macroCarbPercent <= targets.carbs[1]) score += 10;
                 if (macroProtPercent >= targets.protein[0] && macroProtPercent <= targets.protein[1]) score += 10;
                 if (macroFatPercent >= targets.fat[0] && macroFatPercent <= targets.fat[1]) score += 10;
            }
            // Healthy Inclusions (Max 20 points)
            if (includedItems.oils) score += 10;
            if (includedItems.water) score += 5;
            if (total.fiber >= 7) score += 5; // Good fiber bonus
            // Avoidances (Max 20 points)
            score += (20 - (includedItems.avoid * 10) - (includedItems.limit * 5)); // Penalties
            score = Math.max(0, Math.min(maxScore, Math.round(score))); // Clamp score between 0 and 100

            console.log(`[Analyze] Score: ${score}/${maxScore}`);

            // --- Build HTML ---

            // 1. Detailed Analysis Section
            analysisHTML += `
                <div class="detailed-analysis-section text-center mb-4">
                    <p class="text-lg font-semibold">Puntuación: ${score}/${maxScore}</p>
                    <p class="text-sm text-gray-600">Proporciones Aprox. (Plato Principal):
                        Veg/Fruta ${vegFruitPercent}%,
                        Granos ${grainsPercent}%,
                        Proteína ${proteinPercentPlate}%
                    </p>
                </div>`;

            // 2. Nutritional Summary Section
            analysisHTML += `
                <div class="nutrition-summary-section">
                    <h4 class="text-center font-semibold">Resumen Nutricional Estimado del Plato:</h4>
                    <p><strong>Calorías Totales:</strong> ${total.calories.toFixed(1)} kcal</p>
                    <p><strong>Proteínas:</strong> ${total.protein.toFixed(1)} g (~${macroProtPercent}%)</p>
                    <p><strong>Grasas:</strong> ${total.fat.toFixed(1)} g (~${macroFatPercent}%)</p>
                    <p><strong>Carbohidratos:</strong> ${total.carbs.toFixed(1)} g (~${macroCarbPercent}%)</p>
                    <p><strong>Fibra:</strong> ${total.fiber.toFixed(1)} g</p>
                    <p class="text-xs italic text-gray-500 mt-2">(*) Estimación basada en 100g por alimento añadido. Las porciones reales pueden variar. (${foodItemsWithData} de ${foodCount} items con datos nutricionales)</p>
                </div>`;

            // 3. Suggestions Section
            let suggestionsList = '';
            // Proportion suggestions
            if (totalPlateItems > 0) {
                if (vegFruitPercent < 45) suggestionsList += `<li>Aumentar la proporción de vegetales/frutas (Actual: ${vegFruitPercent}%). Objetivo: ~50%.</li>`;
                if (grainsPercent < 20) suggestionsList += `<li>Aumentar la proporción de granos integrales (Actual: ${grainsPercent}%). Objetivo: ~25%.</li>`;
                else if (grainsPercent > 30) suggestionsList += `<li>Reducir la proporción de granos integrales (Actual: ${grainsPercent}%). Objetivo: ~25%.</li>`;
                if (proteinPercentPlate < 20) suggestionsList += `<li>Aumentar la proporción de proteína saludable (Actual: ${proteinPercentPlate}%). Objetivo: ~25%.</li>`;
                else if (proteinPercentPlate > 30) suggestionsList += `<li>Reducir la proporción de proteína saludable (Actual: ${proteinPercentPlate}%). Objetivo: ~25%.</li>`;
            } else {
                 suggestionsList += `<li>Añade alimentos a las secciones principales (vegetales, frutas, granos, proteína) para evaluar proporciones.</li>`;
            }
            // Macro suggestions (if targets exist)
            if (targets) {
                if (macroCarbPercent < targets.carbs[0]) suggestionsList += `<li>Nivel de carbohidratos algo bajo para tu objetivo (${macroCarbPercent}% vs ${targets.carbs[0]}-${targets.carbs[1]}%). Considera añadir más ${getRandomFoodExamples('grains')} o ${getRandomFoodExamples('fruits')}.</li>`;
                else if (macroCarbPercent > targets.carbs[1]) suggestionsList += `<li>Nivel de carbohidratos algo alto para tu objetivo (${macroCarbPercent}% vs ${targets.carbs[0]}-${targets.carbs[1]}%). Considera ajustar porciones de ${getRandomFoodExamples('grains')} o ${getRandomFoodExamples('fruits')}.</li>`;

                if (macroProtPercent < targets.protein[0]) suggestionsList += `<li>Nivel de proteína algo bajo para tu objetivo (${macroProtPercent}% vs ${targets.protein[0]}-${targets.protein[1]}%). Considera añadir más ${getRandomFoodExamples('protein')}.</li>`;
                else if (macroProtPercent > targets.protein[1]) suggestionsList += `<li>Nivel de proteína algo alto para tu objetivo (${macroProtPercent}% vs ${targets.protein[0]}-${targets.protein[1]}%). Considera ajustar porciones de ${getRandomFoodExamples('protein')}.</li>`;

                if (macroFatPercent < targets.fat[0]) suggestionsList += `<li>Nivel de grasas algo bajo para tu objetivo (${macroFatPercent}% vs ${targets.fat[0]}-${targets.fat[1]}%). Considera añadir ${getRandomFoodExamples('oils')}.</li>`;
                else if (macroFatPercent > targets.fat[1]) suggestionsList += `<li>Nivel de grasas algo alto para tu objetivo (${macroFatPercent}% vs ${targets.fat[0]}-${targets.fat[1]}%). Revisa fuentes como ${getRandomFoodExamples('protein', true)} o ${getRandomFoodExamples('oils')}.</li>`;
            }
             // Calorie suggestion vs daily goal
             if (dailyCaloriesGoal > 0) {
                 const percentageOfGoal = ((total.calories / dailyCaloriesGoal) * 100).toFixed(0);
                 let calorieMsg = `Este plato aporta aprox. ${total.calories.toFixed(0)} kcal (${percentageOfGoal}% de tu objetivo diario de ${dailyCaloriesGoal} kcal). `;
                 if (selectedObjective === 'lose') {
                     if (percentageOfGoal < 25) calorieMsg += "Es bajo para una comida principal, asegúrate de compensar en otras comidas o añadir más volumen si no te sientes saciado.";
                     else if (percentageOfGoal > 40) calorieMsg += "Es un aporte calórico considerable para pérdida de peso; ajusta otras comidas.";
                     else calorieMsg += "Parece un aporte razonable para una comida principal en un plan de pérdida de peso.";
                 } else if (selectedObjective === 'gain') {
                      if (percentageOfGoal < 30) calorieMsg += "Podría ser bajo para ganar masa muscular; considera aumentar porciones o añadir snacks.";
                      else calorieMsg += "Buen aporte calórico para tu objetivo.";
                 } else { // maintain
                      if (percentageOfGoal < 25) calorieMsg += "Es algo bajo para una comida principal de mantenimiento; asegúrate de que tus otras comidas compensen.";
                      else if (percentageOfGoal > 40) calorieMsg += "Aporte calórico elevado para mantenimiento; ajusta el resto del día.";
                      else calorieMsg += "Aporte calórico adecuado para una comida principal de mantenimiento.";
                 }
                 suggestionsList += `<li>${calorieMsg}</li>`;
             }
             // Avoid/Limit suggestions
             if (includedItems.avoid > 0) suggestionsList += `<li>Has incluido ${includedItems.avoid} alimento(s) clasificado(s) como 'Evitar'. Considera alternativas más saludables.</li>`;
             if (includedItems.limit > 0) suggestionsList += `<li>Has incluido ${includedItems.limit} alimento(s) clasificado(s) como 'Limitar'. Consúmelos con moderación.</li>`;

            if (suggestionsList) {
                 analysisHTML += `
                    <div class="suggestions-section">
                        <h4>▲ Sugerencias Importantes:</h4>
                        <ul>${suggestionsList}</ul>
                    </div>`;
            }

            // 4. Positives Section
            let positivesList = '';
            if (totalPlateItems > 0) {
                if (vegFruitPercent >= 45) positivesList += `<li>¡Buena proporción de vegetales y frutas (${vegFruitPercent}%)!</li>`;
                if (grainsPercent >= 20 && grainsPercent <= 30) positivesList += `<li>Proporción adecuada de granos integrales (${grainsPercent}%).</li>`;
                 if (proteinPercentPlate >= 20 && proteinPercentPlate <= 30) positivesList += `<li>Proporción adecuada de proteína (${proteinPercentPlate}%).</li>`;
            }
            if (targets) {
                 if (macroCarbPercent >= targets.carbs[0] && macroCarbPercent <= targets.carbs[1] &&
                     macroProtPercent >= targets.protein[0] && macroProtPercent <= targets.protein[1] &&
                     macroFatPercent >= targets.fat[0] && macroFatPercent <= targets.fat[1]) {
                     positivesList += `<li>¡Excelente equilibrio de macronutrientes para tu objetivo!</li>`;
                 }
            }
            if (includedItems.oils) positivesList += `<li>¡Bien por incluir aceites saludables!</li>`;
            if (includedItems.water) positivesList += `<li>¡Bien por incluir agua como bebida principal!</li>`;
            if (total.fiber >= 7) positivesList += `<li>Buen aporte de fibra (${total.fiber.toFixed(1)}g), ¡ayuda a la saciedad!</li>`;
            else if (total.fiber >= 4) positivesList += `<li>Aporte moderado de fibra (${total.fiber.toFixed(1)}g).</li>`;
            if (includedItems.avoid === 0) positivesList += `<li>¡Genial! No has incluido alimentos clasificados como 'Evitar'.</li>`;


            if (positivesList) {
                 analysisHTML += `
                    <div class="positives-section">
                        <h4>✓ Consejos y Puntos Positivos:</h4>
                        <ul>${positivesList}</ul>
                    </div>`;
            }

            // Disclaimer
            analysisHTML += `<p class="disclaimer">Recuerda que estos son valores estimados y recomendaciones generales. Consulta con un profesional de la nutrición o médico para obtener asesoramiento personalizado.</p>`;

            analysisResultsDiv.innerHTML = analysisHTML;
            console.log("[Analyze] Analysis complete and results displayed.");
        }

        // --- Other Functions (getGeneralBalanceDescription, getMacroComparisonHTML, getRecommendations, getRandomFoodExamples, clearPlate, clearAnalysisResults, showNotification, save/load, printToPDF, helpers) ---
        // Note: Some helper functions might need slight adjustments or become redundant with the new structure, review as needed.
        // For brevity, keeping the existing helpers, assuming they are still useful or adapted within the new structure.

        function getGeneralBalanceDescription(totals) {
            // Simple logic based on presence of key macros
            if (totals.protein > 10 && totals.carbs > 20 && totals.fat > 5 && totals.fiber > 5) {
                return "bastante equilibrado";
            } else if (totals.protein > 5 && totals.carbs > 10) {
                return "razonablemente variado";
            } else {
                return "simple";
            }
        }
        function getMacroComparisonHTML(macroName, percent, targetRange) { /* ... (kept for potential reuse/reference, but main suggestions are now in the new section) ... */ return '';}
        function getRecommendations(carbP, protP, fatP, targets) { /* ... (kept for potential reuse/reference, but main suggestions are now in the new section) ... */ return '';}

        function getRandomFoodExamples(category, includeFattyProtein = false) { /* ... (same as before) ... */ }
        function clearPlate() {
            console.log("[Clear Plate] Limpiando el plato."); // DEBUG
            currentPlate = { vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: [] };
            renderPlate();
            analysisResultsDiv.innerHTML = `
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Análisis del Plato y Recomendaciones:</h3>
                <p class="text-gray-600 italic">Plato limpiado. Selecciona alimentos y haz clic en "Analizar Plato".</p>`;
            caloriesInput.value = '';
            goalSelect.value = 'maintenance';
            for (const category in selectors) {
                if (selectors[category]) selectors[category].value = "";
            }
            showNotification('Plato limpiado.', 2000);
        }
        function clearAnalysisResults() {
             // Reset the analysis div to its initial placeholder state
             analysisResultsDiv.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-gray-700 text-center">Análisis del Plato</h3>
                <p class="text-gray-500 italic text-center">Selecciona alimentos, define tu contexto y haz clic en "Analizar Plato" para ver los resultados.</p>`;
         }
// --- SAVE, LOAD, CLEAR, PRINT FUNCTIONS ---

        function savePlate() {
            console.log("[Save Plate] Intentando guardar:", currentPlate); // DEBUG
            try {
                // Save the enhanced currentPlate structure
                localStorage.setItem('interactivePlateData', JSON.stringify(currentPlate));
                console.log("[Save Plate] Datos guardados exitosamente en localStorage."); // DEBUG
                showNotification('Plato guardado correctamente.');
            } catch (e) {
                console.error("[Save Plate] Error saving plate data to localStorage:", e); // DEBUG
                // Provide more specific error message
                let errorMsg = 'Error desconocido al guardar el plato.';
                if (e.name === 'QuotaExceededError') {
                    errorMsg = 'Error al guardar: Almacenamiento local lleno.';
                } else if (e.name === 'SecurityError') {
                    errorMsg = 'Error al guardar: Almacenamiento local desactivado o no permitido por el navegador.';
                }
                showNotification(errorMsg, 4000, true);
            }
        }

        function loadPlate() {
            console.log("[Load Plate] Intentando cargar datos..."); // DEBUG
            let loadedSuccessfully = false;
            let plateIsEmpty = true;
            let savedData = null; // Keep track of raw saved data for debugging
            try {
                savedData = localStorage.getItem('interactivePlateData');
                if (savedData) {
                    console.log("[Load Plate] Datos encontrados en localStorage:", savedData); // DEBUG
                    const parsedData = JSON.parse(savedData);
                    console.log("[Load Plate] Datos parseados:", parsedData); // DEBUG

                    // Reset currentPlate and merge saved data, ensuring all keys and structure exist
                    const defaultPlate = { vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: [] };
                    currentPlate = { ...defaultPlate }; // Start with default structure

                    let migrationNeeded = false; // Flag if old format detected

                    for (const category in defaultPlate) {
                        if (parsedData[category] && Array.isArray(parsedData[category])) {
                            // Ensure each item has the correct structure (name, category, nutrition)
                            currentPlate[category] = parsedData[category]
                                .map(item => {
                                    // Compatibility check: if old format (string), convert it
                                    if (typeof item === 'string') {
                                        migrationNeeded = true; // Mark that migration happened
                                        console.log(`[Load Plate] Migrando item antiguo: ${item} en categoría ${category}`); // DEBUG
                                        return {
                                            name: item,
                                            category: category,
                                            nutrition: getNutritionData(item)
                                        };
                                    }
                                    // If it's an object, ensure it has the needed keys
                                    if (typeof item === 'object' && item !== null && item.name) {
                                        // Ensure nutrition data is present or re-fetched if missing
                                        const nutritionData = item.nutrition || getNutritionData(item.name);
                                        return {
                                            name: item.name,
                                            category: item.category || category, // Use saved category or current loop category
                                            nutrition: nutritionData
                                        };
                                    }
                                    console.warn("[Load Plate] Item inválido encontrado y filtrado:", item); // DEBUG
                                    return null; // Invalid item format
                                })
                                .filter(item => item !== null); // Remove invalid items
                        }
                    }
                     // Check if any items were actually loaded
                    plateIsEmpty = Object.values(currentPlate).every(arr => arr.length === 0);
                    loadedSuccessfully = !plateIsEmpty; // Consider successful only if data was loaded

                    if (migrationNeeded) {
                        console.log("[Load Plate] Se realizó una migración de datos del formato antiguo."); // DEBUG
                        showNotification("Datos antiguos actualizados al nuevo formato.", 2500);
                        // Optionally re-save immediately after migration
                        // savePlate();
                    }

                } else {
                     console.log("[Load Plate] No se encontraron datos guardados en localStorage."); // DEBUG
                     currentPlate = { vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: [] };
                     plateIsEmpty = true;
                }
            } catch (e) {
                console.error("[Load Plate] Error loading or parsing plate data from localStorage:", e); // DEBUG
                console.error("[Load Plate] Datos crudos que causaron el error:", savedData); // Log raw data on error
                showNotification('Error al cargar/procesar el plato guardado. Se mostrará un plato vacío.', 4000, true);
                currentPlate = { vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: [] };
                plateIsEmpty = true;
            }

            renderPlate(); // Render the loaded (or empty) plate

            // Update analysis message based on load status and content
             const initialAnalysisMessage = loadedSuccessfully
                ? 'Plato cargado desde el almacenamiento local. Analiza para ver resultados.'
                : (savedData !== null ? 'Error al cargar, mostrando plato vacío.' : 'No se encontró plato guardado.'); // More specific message

            analysisResultsDiv.innerHTML = `
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Análisis del Plato y Recomendaciones:</h3>
                <p class="text-gray-600 italic">${initialAnalysisMessage} ${plateIsEmpty ? 'Selecciona alimentos y analiza.' : ''}</p>`;

            if (loadedSuccessfully) {
                showNotification('Último plato guardado cargado.');
            }
        }


        function clearPlate() {
            console.log("[Clear Plate] Limpiando el plato."); // DEBUG
            currentPlate = { vegetables: [], fruits: [], grains: [], protein: [], oils: [], drinks: [] };
            renderPlate();
            analysisResultsDiv.innerHTML = `
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Análisis del Plato y Recomendaciones:</h3>
                <p class="text-gray-600 italic">Plato limpiado. Selecciona alimentos y haz clic en "Analizar Plato".</p>`;
            caloriesInput.value = '';
            goalSelect.value = 'maintenance';
            for (const category in selectors) {
                if (selectors[category]) selectors[category].value = "";
            }
            showNotification('Plato limpiado.', 2000);
        }

        /** Generates a PDF containing only the plate and analysis results. */
        function printToPDF() {
            console.log("[Print PDF] Iniciando generación de PDF..."); // DEBUG
            // Check if jsPDF and html2canvas libraries are loaded
            if (typeof window.jspdf === 'undefined' || typeof window.jspdf.jsPDF === 'undefined' || typeof html2canvas === 'undefined') {
                console.error("[Print PDF] Error: jsPDF or html2canvas library not loaded.");
                showNotification("Error: No se pudo encontrar la librería para generar PDF.", 4000, true);
                return;
            }
            const { jsPDF } = window.jspdf; // Destructure jsPDF constructor

            // Elements to capture (the main container holding plate and analysis)
            const areaToPrint = document.getElementById('printable-area');
             if (!areaToPrint) {
                 console.error("[Print PDF] Error: Printable area element (#printable-area) not found.");
                 showNotification("Error: No se encontró el área para imprimir.", 4000, true);
                 return;
             }

            // Elements to temporarily hide within the printable area
            const buttonsToHide = areaToPrint.querySelectorAll('.plate-section ul button, .side-section ul button'); // Include side section buttons just in case
            const oilsSection = document.getElementById('oils-side-section'); // Get oils section
            const drinksSection = document.getElementById('drinks-side-section'); // Get drinks section

            // --- Hide elements before capture ---
            console.log("[Print PDF] Ocultando elementos no deseados..."); // DEBUG
            buttonsToHide.forEach(btn => btn.style.visibility = 'hidden');
            let oilsOriginalDisplay = ''; // Store original display style
            let drinksOriginalDisplay = '';
            if (oilsSection) {
                oilsOriginalDisplay = oilsSection.style.display; // Store original
                oilsSection.style.display = 'none'; // Hide oils section
                console.log("[Print PDF] Sección de aceites oculta."); // DEBUG
            } else {
                 console.warn("[Print PDF] Sección de aceites no encontrada."); // DEBUG
            }
            if (drinksSection) {
                drinksOriginalDisplay = drinksSection.style.display; // Store original
                drinksSection.style.display = 'none'; // Hide drinks section
                console.log("[Print PDF] Sección de bebidas oculta."); // DEBUG
            } else {
                console.warn("[Print PDF] Sección de bebidas no encontrada."); // DEBUG
            }
            // ---

            console.log("[Print PDF] Capturando área con html2canvas..."); // DEBUG
            // Use html2canvas to capture the modified printable area
            html2canvas(areaToPrint, {
                scale: 2, // Increase scale for better resolution
                useCORS: true,
                logging: false // Disable html2canvas console logging
             })
            .then(canvas => {
                console.log("[Print PDF] Captura de canvas exitosa. Generando PDF..."); // DEBUG
                // --- PDF Generation Logic ---
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF({ orientation: 'portrait', unit: 'pt', format: 'a4' });

                const imgProps = pdf.getImageProperties(imgData);
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const margin = 40; // Page margin
                const headerHeight = 40; // Space for title
                const availableWidth = pdfWidth - 2 * margin;
                const availableHeight = pdfHeight - 2 * margin - headerHeight;

                // Calculate image dimensions to fit PDF page
                let ratio = Math.min(availableWidth / imgProps.width, availableHeight / imgProps.height);
                let finalImgWidth = imgProps.width * ratio;
                let finalImgHeight = imgProps.height * ratio;
                let xPos = (pdfWidth - finalImgWidth) / 2; // Center horizontally
                let yPos = margin + headerHeight; // Position below title

                // Add title and image to PDF
                pdf.setFontSize(18);
                pdf.text("Resumen de Mi Plato Interactivo", pdfWidth / 2, margin + 10, { align: 'center' });
                pdf.addImage(imgData, 'PNG', xPos, yPos, finalImgWidth, finalImgHeight);

                pdf.save('mi-plato-interactivo.pdf'); // Save the PDF
                console.log("[Print PDF] PDF guardado."); // DEBUG
                showNotification('PDF generado correctamente.', 3000);

            }).catch(err => {
                console.error("[Print PDF] Error generating PDF:", err); // DEBUG
                showNotification("Error al generar el PDF. Revisa la consola para más detalles.", 4000, true);
            }).finally(() => {
                // --- Make elements visible again ---
                console.log("[Print PDF] Restaurando visibilidad de elementos ocultos..."); // DEBUG
                buttonsToHide.forEach(btn => btn.style.visibility = 'visible');
                if (oilsSection) {
                    oilsSection.style.display = oilsOriginalDisplay; // Restore original display
                    console.log("[Print PDF] Sección de aceites restaurada."); // DEBUG
                }
                if (drinksSection) {
                    drinksSection.style.display = drinksOriginalDisplay; // Restore original display
                     console.log("[Print PDF] Sección de bebidas restaurada."); // DEBUG
                }
                console.log("[Print PDF] Proceso de impresión finalizado."); // DEBUG
                // ---
            });
        }
        function getCategorySpanishName(category) { /* ... (same as before) ... */ }
        function getObjectiveSpanishName(objective) { /* ... (same as before) ... */ }
        function getActivityLevelSpanishName(level) { /* ... (same as before) ... */ }


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("[Init] DOM cargado."); // DEBUG
            populateSelectors(); // Populate with new data
            loadPlate(); // Load saved data (handles rendering)

            // Add event listeners
            if (analyzeBtn) analyzeBtn.addEventListener('click', analyzePlate);
            else console.error("Botón Analizar no encontrado");
            if (saveBtn) saveBtn.addEventListener('click', savePlate);
            else console.error("Botón Guardar no encontrado");
            if (loadBtn) loadBtn.addEventListener('click', loadPlate);
            else console.error("Botón Cargar no encontrado");
            if (printBtn) printBtn.addEventListener('click', printToPDF);
            else console.error("Botón Imprimir no encontrado");
            if (clearBtn) clearBtn.addEventListener('click', clearPlate);
            else console.error("Botón Limpiar no encontrado");

             // Add listener for Enter key on calorie input
             if (dailyCaloriesInput && analyzeBtn) {
                 dailyCaloriesInput.addEventListener('keypress', function (e) {
                     // Allow only numbers
                     if (!/\d/.test(e.key) && e.key !== 'Backspace' && e.key !== 'Delete' && e.key !== 'ArrowLeft' && e.key !== 'ArrowRight' && e.key !== 'Tab') {
                         e.preventDefault();
                     }
                     // Trigger analysis on Enter
                     if (e.key === 'Enter') {
                         analyzePlate();
                     }
                 });
             }

            console.log("[Init] Inicialización completada y listeners añadidos."); // DEBUG
        });

    </script>

</body>
</html>
